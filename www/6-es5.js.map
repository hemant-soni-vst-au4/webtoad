{"version":3,"sources":["webpack:///node_modules/@ionic/core/dist/esm/ionic-global-63a97a32.js","webpack:///node_modules/@ionic/core/dist/esm/cubic-bezier-eea9a7a9.js","webpack:///node_modules/@ionic/core/dist/esm/index-c3ff7f2e.js","webpack:///node_modules/@ionic/core/dist/esm/ion-nav_2.entry.js"],"names":["getPlatforms","win","setupPlatforms","isPlatform","winOrPlatform","platform","undefined","includes","window","Ionic","platforms","detectPlatforms","forEach","p","document","documentElement","classList","add","Object","keys","PLATFORMS_MAP","filter","isMobileWeb","isMobile","isHybrid","isIpad","testUserAgent","isIphone","isIOS","isAndroid","isAndroidTablet","isPhablet","width","innerWidth","height","innerHeight","smallest","Math","min","largest","max","isTablet","matchMedia","isDesktop","isCordova","isCapacitorNative","capacitor","isNative","isElectron","isPWA","matches","navigator","standalone","expr","test","userAgent","query","Config","m","Map","configObj","entries","key","fallback","value","get","val","parseFloat","isNaN","NaN","set","config","configFromSession","configStr","sessionStorage","getItem","IONIC_SESSION_KEY","JSON","parse","e","saveConfig","c","setItem","stringify","configFromURL","location","search","slice","split","map","entry","decodeURIComponent","startsWith","IONIC_PREFIX","length","input","substr","defaultMode","getIonMode","ref","initialize","userConfig","doc","assign","persistConfig","reset","getBoolean","mode","getAttribute","setAttribute","isIonicElement","elm","tagName","isAllowedIonicModeValue","elmMode","console","warn","parentElement","getTimeGivenProgression","p0","p1","p2","p3","progression","solveCubicBezier","tValue","solveCubicParametricEquation","t","partA","pow","partB","partC","refPoint","roots","solveCubicEquation","root","solveQuadraticEquation","a","b","discriminant","sqrt","d","q","r","phi","acos","s","cos","PI","LIFECYCLE_WILL_ENTER","LIFECYCLE_DID_ENTER","LIFECYCLE_WILL_LEAVE","LIFECYCLE_DID_LEAVE","LIFECYCLE_WILL_UNLOAD","iosTransitionAnimation","mdTransitionAnimation","transition","opts","Promise","resolve","reject","beforeTransition","runTransition","then","result","animation","destroy","afterTransition","error","enteringEl","leavingEl","setZIndex","direction","showGoBack","remove","setPageHidden","getAnimationBuilder","animationBuilder","ani","isBrowser","noAnimation","animated","duration","getAnimation","waitForReady","trans","baseEl","fireWillEvents","playTransition","didComplete","progressCallback","fireDidEvents","hasCompleted","defaultDeep","deep","deepWait","promises","deepReady","shallowReady","all","notifyViewReady","viewIsReady","promise","onFinish","currentStep","progressStart","play","lifecycle","el","eventName","ev","CustomEvent","bubbles","cancelable","dispatchEvent","element","componentOnReady","stencilEl","Array","from","children","hidden","removeAttribute","style","zIndex","getIonPageElement","contains","ionPage","querySelector","VIEW_STATE_NEW","VIEW_STATE_ATTACHED","VIEW_STATE_DESTROYED","ViewController","component","params","state","container","delegate","removeViewFromDom","nav","view","id","currentParams","keysA","keysB","convertToView","page","convertToViews","pages","componentProps","v","navCss","Nav","hostRef","ionNavWillLoad","ionNavWillChange","ionNavDidChange","transInstr","animationEnabled","useRouter","isTransitioning","destroyed","views","gesture","enable","swipeGesture","setRoot","rootParams","closest","emit","rootChanged","createSwipeBackGesture","canStart","bind","onStart","onMove","onEnd","swipeGestureChanged","_destroy","done","queueTrns","insertStart","insertViews","insertIndex","insertComponents","removeStart","removeCount","indexOrViewCtrl","tiConfig","removeView","startIndex","setPages","active","getActiveSync","changed","finish","commonOpts","updateURL","mark","markVisible","viewController","find","popTo","push","index","canGoBackSync","getPreviousSync","indexOf","ti","skipIfBusy","router","canTransition","nextTrns","fireError","requiresTransition","enteringView","leavingView","navChanged","rejectReason","shift","prepareTI","getEnteringView","Error","init","postViewInit","enteringRequiresTransition","leavingRequiresTransition","isBackDirection","success","failed","viewsLength","viewControllers","removeEnd","i","destroyQueue","finalBalance","insertViewAt","destroyView","progressAnimation","sbAni","animationOpts","transitionFinish","cleanupView","cleanup","existingIndex","splice","activeView","activeViewIndex","stepValue","progressStep","shouldComplete","dur","oneTimeCallback","newStepValue","easing","progressEnd","navLink","routerDirection","routerAnimation","pop","NavLink","onClick"],"mappings":"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","file":"6-es5.js","sourcesContent":["import { g as getMode, s as setMode } from './index-7a8b7a1c.js';\n\nconst getPlatforms = (win) => setupPlatforms(win);\nconst isPlatform = (winOrPlatform, platform) => {\n  if (typeof winOrPlatform === 'string') {\n    platform = winOrPlatform;\n    winOrPlatform = undefined;\n  }\n  return getPlatforms(winOrPlatform).includes(platform);\n};\nconst setupPlatforms = (win = window) => {\n  if (typeof win === 'undefined') {\n    return [];\n  }\n  win.Ionic = win.Ionic || {};\n  let platforms = win.Ionic.platforms;\n  if (platforms == null) {\n    platforms = win.Ionic.platforms = detectPlatforms(win);\n    platforms.forEach(p => win.document.documentElement.classList.add(`plt-${p}`));\n  }\n  return platforms;\n};\nconst detectPlatforms = (win) => Object.keys(PLATFORMS_MAP).filter(p => PLATFORMS_MAP[p](win));\nconst isMobileWeb = (win) => isMobile(win) && !isHybrid(win);\nconst isIpad = (win) => {\n  // iOS 12 and below\n  if (testUserAgent(win, /iPad/i)) {\n    return true;\n  }\n  // iOS 13+\n  if (testUserAgent(win, /Macintosh/i) && isMobile(win)) {\n    return true;\n  }\n  return false;\n};\nconst isIphone = (win) => testUserAgent(win, /iPhone/i);\nconst isIOS = (win) => testUserAgent(win, /iPhone|iPod/i) || isIpad(win);\nconst isAndroid = (win) => testUserAgent(win, /android|sink/i);\nconst isAndroidTablet = (win) => {\n  return isAndroid(win) && !testUserAgent(win, /mobile/i);\n};\nconst isPhablet = (win) => {\n  const width = win.innerWidth;\n  const height = win.innerHeight;\n  const smallest = Math.min(width, height);\n  const largest = Math.max(width, height);\n  return (smallest > 390 && smallest < 520) &&\n    (largest > 620 && largest < 800);\n};\nconst isTablet = (win) => {\n  const width = win.innerWidth;\n  const height = win.innerHeight;\n  const smallest = Math.min(width, height);\n  const largest = Math.max(width, height);\n  return (isIpad(win) ||\n    isAndroidTablet(win) ||\n    ((smallest > 460 && smallest < 820) &&\n      (largest > 780 && largest < 1400)));\n};\nconst isMobile = (win) => matchMedia(win, '(any-pointer:coarse)');\nconst isDesktop = (win) => !isMobile(win);\nconst isHybrid = (win) => isCordova(win) || isCapacitorNative(win);\nconst isCordova = (win) => !!(win['cordova'] || win['phonegap'] || win['PhoneGap']);\nconst isCapacitorNative = (win) => {\n  const capacitor = win['Capacitor'];\n  return !!(capacitor && capacitor.isNative);\n};\nconst isElectron = (win) => testUserAgent(win, /electron/i);\nconst isPWA = (win) => !!(win.matchMedia('(display-mode: standalone)').matches || win.navigator.standalone);\nconst testUserAgent = (win, expr) => expr.test(win.navigator.userAgent);\nconst matchMedia = (win, query) => win.matchMedia(query).matches;\nconst PLATFORMS_MAP = {\n  'ipad': isIpad,\n  'iphone': isIphone,\n  'ios': isIOS,\n  'android': isAndroid,\n  'phablet': isPhablet,\n  'tablet': isTablet,\n  'cordova': isCordova,\n  'capacitor': isCapacitorNative,\n  'electron': isElectron,\n  'pwa': isPWA,\n  'mobile': isMobile,\n  'mobileweb': isMobileWeb,\n  'desktop': isDesktop,\n  'hybrid': isHybrid\n};\n\nclass Config {\n  constructor() {\n    this.m = new Map();\n  }\n  reset(configObj) {\n    this.m = new Map(Object.entries(configObj));\n  }\n  get(key, fallback) {\n    const value = this.m.get(key);\n    return value !== undefined ? value : fallback;\n  }\n  getBoolean(key, fallback = false) {\n    const val = this.m.get(key);\n    if (val === undefined) {\n      return fallback;\n    }\n    if (typeof val === 'string') {\n      return val === 'true';\n    }\n    return !!val;\n  }\n  getNumber(key, fallback) {\n    const val = parseFloat(this.m.get(key));\n    return isNaN(val) ? (fallback !== undefined ? fallback : NaN) : val;\n  }\n  set(key, value) {\n    this.m.set(key, value);\n  }\n}\nconst config = /*@__PURE__*/ new Config();\nconst configFromSession = (win) => {\n  try {\n    const configStr = win.sessionStorage.getItem(IONIC_SESSION_KEY);\n    return configStr !== null ? JSON.parse(configStr) : {};\n  }\n  catch (e) {\n    return {};\n  }\n};\nconst saveConfig = (win, c) => {\n  try {\n    win.sessionStorage.setItem(IONIC_SESSION_KEY, JSON.stringify(c));\n  }\n  catch (e) {\n    return;\n  }\n};\nconst configFromURL = (win) => {\n  const configObj = {};\n  win.location.search\n    .slice(1)\n    .split('&')\n    .map(entry => entry.split('='))\n    .map(([key, value]) => [decodeURIComponent(key), decodeURIComponent(value)])\n    .filter(([key]) => startsWith(key, IONIC_PREFIX))\n    .map(([key, value]) => [key.slice(IONIC_PREFIX.length), value])\n    .forEach(([key, value]) => {\n    configObj[key] = value;\n  });\n  return configObj;\n};\nconst startsWith = (input, search) => {\n  return input.substr(0, search.length) === search;\n};\nconst IONIC_PREFIX = 'ionic:';\nconst IONIC_SESSION_KEY = 'ionic-persist-config';\n\nlet defaultMode;\nconst getIonMode = (ref) => {\n  return (ref && getMode(ref)) || defaultMode;\n};\nconst initialize = (userConfig = {}) => {\n  if (typeof window === 'undefined') {\n    return;\n  }\n  const doc = window.document;\n  const win = window;\n  const Ionic = win.Ionic = win.Ionic || {};\n  // Setup platforms\n  setupPlatforms(win);\n  // create the Ionic.config from raw config object (if it exists)\n  // and convert Ionic.config into a ConfigApi that has a get() fn\n  const configObj = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, configFromSession(win)), { persistConfig: false }), Ionic.config), configFromURL(win)), userConfig);\n  config.reset(configObj);\n  if (config.getBoolean('persistConfig')) {\n    saveConfig(win, configObj);\n  }\n  // first see if the mode was set as an attribute on <html>\n  // which could have been set by the user, or by pre-rendering\n  // otherwise get the mode via config settings, and fallback to md\n  Ionic.config = config;\n  Ionic.mode = defaultMode = config.get('mode', (doc.documentElement.getAttribute('mode')) || (isPlatform(win, 'ios') ? 'ios' : 'md'));\n  config.set('mode', defaultMode);\n  doc.documentElement.setAttribute('mode', defaultMode);\n  doc.documentElement.classList.add(defaultMode);\n  if (config.getBoolean('_testing')) {\n    config.set('animated', false);\n  }\n  const isIonicElement = (elm) => elm.tagName && elm.tagName.startsWith('ION-');\n  const isAllowedIonicModeValue = (elmMode) => ['ios', 'md'].includes(elmMode);\n  setMode((elm) => {\n    while (elm) {\n      const elmMode = elm.mode || elm.getAttribute('mode');\n      if (elmMode) {\n        if (isAllowedIonicModeValue(elmMode)) {\n          return elmMode;\n        }\n        else if (isIonicElement(elm)) {\n          console.warn('Invalid ionic mode: \"' + elmMode + '\", expected: \"ios\" or \"md\"');\n        }\n      }\n      elm = elm.parentElement;\n    }\n    return defaultMode;\n  });\n};\n\nexport { isPlatform as a, getIonMode as b, config as c, getPlatforms as g, initialize as i };\n","/**\n * Based on:\n * https://stackoverflow.com/questions/7348009/y-coordinate-for-a-given-x-cubic-bezier\n * https://math.stackexchange.com/questions/26846/is-there-an-explicit-form-for-cubic-b%C3%A9zier-curves\n * TODO: Reduce rounding error\n */\n/**\n * EXPERIMENTAL\n * Given a cubic-bezier curve, get the x value (time) given\n * the y value (progression).\n * Ex: cubic-bezier(0.32, 0.72, 0, 1);\n * P0: (0, 0)\n * P1: (0.32, 0.72)\n * P2: (0, 1)\n * P3: (1, 1)\n *\n * If you give a cubic bezier curve that never reaches the\n * provided progression, this function will return an empty array.\n */\nconst getTimeGivenProgression = (p0, p1, p2, p3, progression) => {\n  return solveCubicBezier(p0[1], p1[1], p2[1], p3[1], progression).map(tValue => {\n    return solveCubicParametricEquation(p0[0], p1[0], p2[0], p3[0], tValue);\n  });\n};\n/**\n * Solve a cubic equation in one dimension (time)\n */\nconst solveCubicParametricEquation = (p0, p1, p2, p3, t) => {\n  const partA = (3 * p1) * Math.pow(t - 1, 2);\n  const partB = (-3 * p2 * t) + (3 * p2) + (p3 * t);\n  const partC = p0 * Math.pow(t - 1, 3);\n  return t * (partA + (t * partB)) - partC;\n};\n/**\n * Find the `t` value for a cubic bezier using Cardano's formula\n */\nconst solveCubicBezier = (p0, p1, p2, p3, refPoint) => {\n  p0 -= refPoint;\n  p1 -= refPoint;\n  p2 -= refPoint;\n  p3 -= refPoint;\n  const roots = solveCubicEquation(p3 - 3 * p2 + 3 * p1 - p0, 3 * p2 - 6 * p1 + 3 * p0, 3 * p1 - 3 * p0, p0);\n  return roots.filter(root => root >= 0 && root <= 1);\n};\nconst solveQuadraticEquation = (a, b, c) => {\n  const discriminant = b * b - 4 * a * c;\n  if (discriminant < 0) {\n    return [];\n  }\n  else {\n    return [\n      (-b + Math.sqrt(discriminant)) / (2 * a),\n      (-b - Math.sqrt(discriminant)) / (2 * a)\n    ];\n  }\n};\nconst solveCubicEquation = (a, b, c, d) => {\n  if (a === 0) {\n    return solveQuadraticEquation(b, c, d);\n  }\n  b /= a;\n  c /= a;\n  d /= a;\n  const p = (3 * c - b * b) / 3;\n  const q = (2 * b * b * b - 9 * b * c + 27 * d) / 27;\n  if (p === 0) {\n    return [Math.pow(-q, 1 / 3)];\n  }\n  else if (q === 0) {\n    return [Math.sqrt(-p), -Math.sqrt(-p)];\n  }\n  const discriminant = Math.pow(q / 2, 2) + Math.pow(p / 3, 3);\n  if (discriminant === 0) {\n    return [Math.pow(q / 2, 1 / 2) - b / 3];\n  }\n  else if (discriminant > 0) {\n    return [Math.pow(-(q / 2) + Math.sqrt(discriminant), 1 / 3) - Math.pow((q / 2) + Math.sqrt(discriminant), 1 / 3) - b / 3];\n  }\n  const r = Math.sqrt(Math.pow(-(p / 3), 3));\n  const phi = Math.acos(-(q / (2 * Math.sqrt(Math.pow(-(p / 3), 3)))));\n  const s = 2 * Math.pow(r, 1 / 3);\n  return [\n    s * Math.cos(phi / 3) - b / 3,\n    s * Math.cos((phi + 2 * Math.PI) / 3) - b / 3,\n    s * Math.cos((phi + 4 * Math.PI) / 3) - b / 3\n  ];\n};\n\nexport { getTimeGivenProgression as g };\n","import { c as writeTask, B as Build } from './index-7a8b7a1c.js';\nimport { c as componentOnReady } from './helpers-dd7e4b7b.js';\n\nconst LIFECYCLE_WILL_ENTER = 'ionViewWillEnter';\nconst LIFECYCLE_DID_ENTER = 'ionViewDidEnter';\nconst LIFECYCLE_WILL_LEAVE = 'ionViewWillLeave';\nconst LIFECYCLE_DID_LEAVE = 'ionViewDidLeave';\nconst LIFECYCLE_WILL_UNLOAD = 'ionViewWillUnload';\n\nconst iosTransitionAnimation = () => import('./ios.transition-48010460.js');\nconst mdTransitionAnimation = () => import('./md.transition-464fd4a8.js');\nconst transition = (opts) => {\n  return new Promise((resolve, reject) => {\n    writeTask(() => {\n      beforeTransition(opts);\n      runTransition(opts).then(result => {\n        if (result.animation) {\n          result.animation.destroy();\n        }\n        afterTransition(opts);\n        resolve(result);\n      }, error => {\n        afterTransition(opts);\n        reject(error);\n      });\n    });\n  });\n};\nconst beforeTransition = (opts) => {\n  const enteringEl = opts.enteringEl;\n  const leavingEl = opts.leavingEl;\n  setZIndex(enteringEl, leavingEl, opts.direction);\n  if (opts.showGoBack) {\n    enteringEl.classList.add('can-go-back');\n  }\n  else {\n    enteringEl.classList.remove('can-go-back');\n  }\n  setPageHidden(enteringEl, false);\n  if (leavingEl) {\n    setPageHidden(leavingEl, false);\n  }\n};\nconst runTransition = async (opts) => {\n  const animationBuilder = await getAnimationBuilder(opts);\n  const ani = (animationBuilder && Build.isBrowser)\n    ? animation(animationBuilder, opts)\n    : noAnimation(opts); // fast path for no animation\n  return ani;\n};\nconst afterTransition = (opts) => {\n  const enteringEl = opts.enteringEl;\n  const leavingEl = opts.leavingEl;\n  enteringEl.classList.remove('ion-page-invisible');\n  if (leavingEl !== undefined) {\n    leavingEl.classList.remove('ion-page-invisible');\n  }\n};\nconst getAnimationBuilder = async (opts) => {\n  if (!opts.leavingEl || !opts.animated || opts.duration === 0) {\n    return undefined;\n  }\n  if (opts.animationBuilder) {\n    return opts.animationBuilder;\n  }\n  const getAnimation = (opts.mode === 'ios')\n    ? (await iosTransitionAnimation()).iosTransitionAnimation\n    : (await mdTransitionAnimation()).mdTransitionAnimation;\n  return getAnimation;\n};\nconst animation = async (animationBuilder, opts) => {\n  await waitForReady(opts, true);\n  const trans = animationBuilder(opts.baseEl, opts);\n  fireWillEvents(opts.enteringEl, opts.leavingEl);\n  const didComplete = await playTransition(trans, opts);\n  if (opts.progressCallback) {\n    opts.progressCallback(undefined);\n  }\n  if (didComplete) {\n    fireDidEvents(opts.enteringEl, opts.leavingEl);\n  }\n  return {\n    hasCompleted: didComplete,\n    animation: trans\n  };\n};\nconst noAnimation = async (opts) => {\n  const enteringEl = opts.enteringEl;\n  const leavingEl = opts.leavingEl;\n  await waitForReady(opts, false);\n  fireWillEvents(enteringEl, leavingEl);\n  fireDidEvents(enteringEl, leavingEl);\n  return {\n    hasCompleted: true\n  };\n};\nconst waitForReady = async (opts, defaultDeep) => {\n  const deep = opts.deepWait !== undefined ? opts.deepWait : defaultDeep;\n  const promises = deep ? [\n    deepReady(opts.enteringEl),\n    deepReady(opts.leavingEl),\n  ] : [\n    shallowReady(opts.enteringEl),\n    shallowReady(opts.leavingEl),\n  ];\n  await Promise.all(promises);\n  await notifyViewReady(opts.viewIsReady, opts.enteringEl);\n};\nconst notifyViewReady = async (viewIsReady, enteringEl) => {\n  if (viewIsReady) {\n    await viewIsReady(enteringEl);\n  }\n};\nconst playTransition = (trans, opts) => {\n  const progressCallback = opts.progressCallback;\n  const promise = new Promise(resolve => {\n    trans.onFinish((currentStep) => resolve(currentStep === 1));\n  });\n  // cool, let's do this, start the transition\n  if (progressCallback) {\n    // this is a swipe to go back, just get the transition progress ready\n    // kick off the swipe animation start\n    trans.progressStart(true);\n    progressCallback(trans);\n  }\n  else {\n    // only the top level transition should actually start \"play\"\n    // kick it off and let it play through\n    // ******** DOM WRITE ****************\n    trans.play();\n  }\n  // create a callback for when the animation is done\n  return promise;\n};\nconst fireWillEvents = (enteringEl, leavingEl) => {\n  lifecycle(leavingEl, LIFECYCLE_WILL_LEAVE);\n  lifecycle(enteringEl, LIFECYCLE_WILL_ENTER);\n};\nconst fireDidEvents = (enteringEl, leavingEl) => {\n  lifecycle(enteringEl, LIFECYCLE_DID_ENTER);\n  lifecycle(leavingEl, LIFECYCLE_DID_LEAVE);\n};\nconst lifecycle = (el, eventName) => {\n  if (el) {\n    const ev = new CustomEvent(eventName, {\n      bubbles: false,\n      cancelable: false,\n    });\n    el.dispatchEvent(ev);\n  }\n};\nconst shallowReady = (el) => {\n  if (el) {\n    return new Promise(resolve => componentOnReady(el, resolve));\n  }\n  return Promise.resolve();\n};\nconst deepReady = async (el) => {\n  const element = el;\n  if (element) {\n    if (element.componentOnReady != null) {\n      const stencilEl = await element.componentOnReady();\n      if (stencilEl != null) {\n        return;\n      }\n    }\n    await Promise.all(Array.from(element.children).map(deepReady));\n  }\n};\nconst setPageHidden = (el, hidden) => {\n  if (hidden) {\n    el.setAttribute('aria-hidden', 'true');\n    el.classList.add('ion-page-hidden');\n  }\n  else {\n    el.hidden = false;\n    el.removeAttribute('aria-hidden');\n    el.classList.remove('ion-page-hidden');\n  }\n};\nconst setZIndex = (enteringEl, leavingEl, direction) => {\n  if (enteringEl !== undefined) {\n    enteringEl.style.zIndex = (direction === 'back')\n      ? '99'\n      : '101';\n  }\n  if (leavingEl !== undefined) {\n    leavingEl.style.zIndex = '100';\n  }\n};\nconst getIonPageElement = (element) => {\n  if (element.classList.contains('ion-page')) {\n    return element;\n  }\n  const ionPage = element.querySelector(':scope > .ion-page, :scope > ion-nav, :scope > ion-tabs');\n  if (ionPage) {\n    return ionPage;\n  }\n  // idk, return the original element so at least something animates and we don't have a null pointer\n  return element;\n};\n\nexport { LIFECYCLE_WILL_ENTER as L, LIFECYCLE_DID_ENTER as a, LIFECYCLE_WILL_LEAVE as b, LIFECYCLE_DID_LEAVE as c, LIFECYCLE_WILL_UNLOAD as d, deepReady as e, getIonPageElement as g, lifecycle as l, setPageHidden as s, transition as t };\n","import { r as registerInstance, e as createEvent, h, i as getElement, H as Host } from './index-7a8b7a1c.js';\nimport { b as getIonMode, c as config } from './ionic-global-63a97a32.js';\nimport { g as getTimeGivenProgression } from './cubic-bezier-eea9a7a9.js';\nimport { l as assert } from './helpers-dd7e4b7b.js';\nimport { l as lifecycle, t as transition, s as setPageHidden, d as LIFECYCLE_WILL_UNLOAD, b as LIFECYCLE_WILL_LEAVE, c as LIFECYCLE_DID_LEAVE } from './index-c3ff7f2e.js';\nimport { a as attachComponent } from './framework-delegate-4392cd63.js';\n\nconst VIEW_STATE_NEW = 1;\nconst VIEW_STATE_ATTACHED = 2;\nconst VIEW_STATE_DESTROYED = 3;\nclass ViewController {\n  constructor(component, params) {\n    this.component = component;\n    this.params = params;\n    this.state = VIEW_STATE_NEW;\n  }\n  async init(container) {\n    this.state = VIEW_STATE_ATTACHED;\n    if (!this.element) {\n      const component = this.component;\n      this.element = await attachComponent(this.delegate, container, component, ['ion-page', 'ion-page-invisible'], this.params);\n    }\n  }\n  /**\n   * DOM WRITE\n   */\n  _destroy() {\n    assert(this.state !== VIEW_STATE_DESTROYED, 'view state must be ATTACHED');\n    const element = this.element;\n    if (element) {\n      if (this.delegate) {\n        this.delegate.removeViewFromDom(element.parentElement, element);\n      }\n      else {\n        element.remove();\n      }\n    }\n    this.nav = undefined;\n    this.state = VIEW_STATE_DESTROYED;\n  }\n}\nconst matches = (view, id, params) => {\n  if (!view) {\n    return false;\n  }\n  if (view.component !== id) {\n    return false;\n  }\n  const currentParams = view.params;\n  if (currentParams === params) {\n    return true;\n  }\n  if (!currentParams && !params) {\n    return true;\n  }\n  if (!currentParams || !params) {\n    return false;\n  }\n  const keysA = Object.keys(currentParams);\n  const keysB = Object.keys(params);\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n  // Test for A's keys different from B.\n  for (const key of keysA) {\n    if (currentParams[key] !== params[key]) {\n      return false;\n    }\n  }\n  return true;\n};\nconst convertToView = (page, params) => {\n  if (!page) {\n    return null;\n  }\n  if (page instanceof ViewController) {\n    return page;\n  }\n  return new ViewController(page, params);\n};\nconst convertToViews = (pages) => {\n  return pages.map(page => {\n    if (page instanceof ViewController) {\n      return page;\n    }\n    if ('component' in page) {\n      /**\n       * TODO Ionic 6:\n       * Consider switching to just using `undefined` here\n       * as well as on the public interfaces and on\n       * `NavComponentWithProps`. Previously `pages` was\n       * of type `any[]` so TypeScript did not catch this.\n       */\n      return convertToView(page.component, (page.componentProps === null) ? undefined : page.componentProps);\n    }\n    return convertToView(page, undefined);\n  }).filter(v => v !== null);\n};\n\nconst navCss = \":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}\";\n\nconst Nav = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.ionNavWillLoad = createEvent(this, \"ionNavWillLoad\", 7);\n    this.ionNavWillChange = createEvent(this, \"ionNavWillChange\", 3);\n    this.ionNavDidChange = createEvent(this, \"ionNavDidChange\", 3);\n    this.transInstr = [];\n    this.animationEnabled = true;\n    this.useRouter = false;\n    this.isTransitioning = false;\n    this.destroyed = false;\n    this.views = [];\n    /**\n     * If `true`, the nav should animate the transition of components.\n     */\n    this.animated = true;\n  }\n  swipeGestureChanged() {\n    if (this.gesture) {\n      this.gesture.enable(this.swipeGesture === true);\n    }\n  }\n  rootChanged() {\n    if (this.root !== undefined) {\n      if (!this.useRouter) {\n        this.setRoot(this.root, this.rootParams);\n      }\n    }\n  }\n  componentWillLoad() {\n    this.useRouter =\n      !!document.querySelector('ion-router') &&\n        !this.el.closest('[no-router]');\n    if (this.swipeGesture === undefined) {\n      const mode = getIonMode(this);\n      this.swipeGesture = config.getBoolean('swipeBackEnabled', mode === 'ios');\n    }\n    this.ionNavWillLoad.emit();\n  }\n  async componentDidLoad() {\n    this.rootChanged();\n    this.gesture = (await import('./swipe-back-ee838cf8.js')).createSwipeBackGesture(this.el, this.canStart.bind(this), this.onStart.bind(this), this.onMove.bind(this), this.onEnd.bind(this));\n    this.swipeGestureChanged();\n  }\n  disconnectedCallback() {\n    for (const view of this.views) {\n      lifecycle(view.element, LIFECYCLE_WILL_UNLOAD);\n      view._destroy();\n    }\n    if (this.gesture) {\n      this.gesture.destroy();\n      this.gesture = undefined;\n    }\n    // release swipe back gesture and transition\n    this.transInstr.length = this.views.length = 0;\n    this.destroyed = true;\n  }\n  /**\n   * Push a new component onto the current navigation stack. Pass any additional\n   * information along as an object. This additional information is accessible\n   * through NavParams.\n   *\n   * @param component The component to push onto the navigation stack.\n   * @param componentProps Any properties of the component.\n   * @param opts The navigation options.\n   * @param done The transition complete function.\n   */\n  push(component, componentProps, opts, done) {\n    return this.queueTrns({\n      insertStart: -1,\n      insertViews: [{ component, componentProps }],\n      opts\n    }, done);\n  }\n  /**\n   * Inserts a component into the navigation stack at the specified index.\n   * This is useful to add a component at any point in the navigation stack.\n   *\n   * @param insertIndex The index to insert the component at in the stack.\n   * @param component The component to insert into the navigation stack.\n   * @param componentProps Any properties of the component.\n   * @param opts The navigation options.\n   * @param done The transition complete function.\n   */\n  insert(insertIndex, component, componentProps, opts, done) {\n    return this.queueTrns({\n      insertStart: insertIndex,\n      insertViews: [{ component, componentProps }],\n      opts\n    }, done);\n  }\n  /**\n   * Inserts an array of components into the navigation stack at the specified index.\n   * The last component in the array will become instantiated as a view, and animate\n   * in to become the active view.\n   *\n   * @param insertIndex The index to insert the components at in the stack.\n   * @param insertComponents The components to insert into the navigation stack.\n   * @param opts The navigation options.\n   * @param done The transition complete function.\n   */\n  insertPages(insertIndex, insertComponents, opts, done) {\n    return this.queueTrns({\n      insertStart: insertIndex,\n      insertViews: insertComponents,\n      opts\n    }, done);\n  }\n  /**\n   * Pop a component off of the navigation stack. Navigates back from the current\n   * component.\n   *\n   * @param opts The navigation options.\n   * @param done The transition complete function.\n   */\n  pop(opts, done) {\n    return this.queueTrns({\n      removeStart: -1,\n      removeCount: 1,\n      opts\n    }, done);\n  }\n  /**\n   * Pop to a specific index in the navigation stack.\n   *\n   * @param indexOrViewCtrl The index or view controller to pop to.\n   * @param opts The navigation options.\n   * @param done The transition complete function.\n   */\n  popTo(indexOrViewCtrl, opts, done) {\n    const tiConfig = {\n      removeStart: -1,\n      removeCount: -1,\n      opts\n    };\n    if (typeof indexOrViewCtrl === 'object' && indexOrViewCtrl.component) {\n      tiConfig.removeView = indexOrViewCtrl;\n      tiConfig.removeStart = 1;\n    }\n    else if (typeof indexOrViewCtrl === 'number') {\n      tiConfig.removeStart = indexOrViewCtrl + 1;\n    }\n    return this.queueTrns(tiConfig, done);\n  }\n  /**\n   * Navigate back to the root of the stack, no matter how far back that is.\n   *\n   * @param opts The navigation options.\n   * @param done The transition complete function.\n   */\n  popToRoot(opts, done) {\n    return this.queueTrns({\n      removeStart: 1,\n      removeCount: -1,\n      opts\n    }, done);\n  }\n  /**\n   * Removes a component from the navigation stack at the specified index.\n   *\n   * @param startIndex The number to begin removal at.\n   * @param removeCount The number of components to remove.\n   * @param opts The navigation options.\n   * @param done The transition complete function.\n   */\n  removeIndex(startIndex, removeCount = 1, opts, done) {\n    return this.queueTrns({\n      removeStart: startIndex,\n      removeCount,\n      opts\n    }, done);\n  }\n  /**\n   * Set the root for the current navigation stack to a component.\n   *\n   * @param component The component to set as the root of the navigation stack.\n   * @param componentProps Any properties of the component.\n   * @param opts The navigation options.\n   * @param done The transition complete function.\n   */\n  setRoot(component, componentProps, opts, done) {\n    return this.setPages([{ component, componentProps }], opts, done);\n  }\n  /**\n   * Set the views of the current navigation stack and navigate to the last view.\n   * By default animations are disabled, but they can be enabled by passing options\n   * to the navigation controller. Navigation parameters can also be passed to the\n   * individual pages in the array.\n   *\n   * @param views The list of views to set as the navigation stack.\n   * @param opts The navigation options.\n   * @param done The transition complete function.\n   */\n  setPages(views, opts, done) {\n    if (opts == null) {\n      opts = {};\n    }\n    // if animation wasn't set to true then default it to NOT animate\n    if (opts.animated !== true) {\n      opts.animated = false;\n    }\n    return this.queueTrns({\n      insertStart: 0,\n      insertViews: views,\n      removeStart: 0,\n      removeCount: -1,\n      opts\n    }, done);\n  }\n  /** @internal */\n  setRouteId(id, params, direction, animation) {\n    const active = this.getActiveSync();\n    if (matches(active, id, params)) {\n      return Promise.resolve({\n        changed: false,\n        element: active.element\n      });\n    }\n    let resolve;\n    const promise = new Promise(r => (resolve = r));\n    let finish;\n    const commonOpts = {\n      updateURL: false,\n      viewIsReady: enteringEl => {\n        let mark;\n        const p = new Promise(r => (mark = r));\n        resolve({\n          changed: true,\n          element: enteringEl,\n          markVisible: async () => {\n            mark();\n            await finish;\n          }\n        });\n        return p;\n      }\n    };\n    if (direction === 'root') {\n      finish = this.setRoot(id, params, commonOpts);\n    }\n    else {\n      const viewController = this.views.find(v => matches(v, id, params));\n      if (viewController) {\n        finish = this.popTo(viewController, Object.assign(Object.assign({}, commonOpts), { direction: 'back', animationBuilder: animation }));\n      }\n      else if (direction === 'forward') {\n        finish = this.push(id, params, Object.assign(Object.assign({}, commonOpts), { animationBuilder: animation }));\n      }\n      else if (direction === 'back') {\n        finish = this.setRoot(id, params, Object.assign(Object.assign({}, commonOpts), { direction: 'back', animated: true, animationBuilder: animation }));\n      }\n    }\n    return promise;\n  }\n  /** @internal */\n  async getRouteId() {\n    const active = this.getActiveSync();\n    return active\n      ? {\n        id: active.element.tagName,\n        params: active.params,\n        element: active.element\n      }\n      : undefined;\n  }\n  /**\n   * Get the active view.\n   */\n  getActive() {\n    return Promise.resolve(this.getActiveSync());\n  }\n  /**\n   * Get the view at the specified index.\n   *\n   * @param index The index of the view.\n   */\n  getByIndex(index) {\n    return Promise.resolve(this.views[index]);\n  }\n  /**\n   * Returns `true` if the current view can go back.\n   *\n   * @param view The view to check.\n   */\n  canGoBack(view) {\n    return Promise.resolve(this.canGoBackSync(view));\n  }\n  /**\n   * Get the previous view.\n   *\n   * @param view The view to get.\n   */\n  getPrevious(view) {\n    return Promise.resolve(this.getPreviousSync(view));\n  }\n  getLength() {\n    return this.views.length;\n  }\n  getActiveSync() {\n    return this.views[this.views.length - 1];\n  }\n  canGoBackSync(view = this.getActiveSync()) {\n    return !!(view && this.getPreviousSync(view));\n  }\n  getPreviousSync(view = this.getActiveSync()) {\n    if (!view) {\n      return undefined;\n    }\n    const views = this.views;\n    const index = views.indexOf(view);\n    return index > 0 ? views[index - 1] : undefined;\n  }\n  // _queueTrns() adds a navigation stack change to the queue and schedules it to run:\n  // 1. _nextTrns(): consumes the next transition in the queue\n  // 2. _viewInit(): initializes enteringView if required\n  // 3. _viewTest(): ensures canLeave/canEnter Returns `true`, so the operation can continue\n  // 4. _postViewInit(): add/remove the views from the navigation stack\n  // 5. _transitionInit(): initializes the visual transition if required and schedules it to run\n  // 6. _viewAttachToDOM(): attaches the enteringView to the DOM\n  // 7. _transitionStart(): called once the transition actually starts, it initializes the Animation underneath.\n  // 8. _transitionFinish(): called once the transition finishes\n  // 9. _cleanup(): syncs the navigation internal state with the DOM. For example it removes the pages from the DOM or hides/show them.\n  async queueTrns(ti, done) {\n    if (this.isTransitioning && ti.opts != null && ti.opts.skipIfBusy) {\n      return Promise.resolve(false);\n    }\n    const promise = new Promise((resolve, reject) => {\n      ti.resolve = resolve;\n      ti.reject = reject;\n    });\n    ti.done = done;\n    /**\n     * If using router, check to see if navigation hooks\n     * will allow us to perform this transition. This\n     * is required in order for hooks to work with\n     * the ion-back-button or swipe to go back.\n     */\n    if (ti.opts && ti.opts.updateURL !== false && this.useRouter) {\n      const router = document.querySelector('ion-router');\n      if (router) {\n        const canTransition = await router.canTransition();\n        if (canTransition === false) {\n          return Promise.resolve(false);\n        }\n        else if (typeof canTransition === 'string') {\n          router.push(canTransition, ti.opts.direction || 'back');\n          return Promise.resolve(false);\n        }\n      }\n    }\n    // Normalize empty\n    if (ti.insertViews && ti.insertViews.length === 0) {\n      ti.insertViews = undefined;\n    }\n    // Enqueue transition instruction\n    this.transInstr.push(ti);\n    // if there isn't a transition already happening\n    // then this will kick off this transition\n    this.nextTrns();\n    return promise;\n  }\n  success(result, ti) {\n    if (this.destroyed) {\n      this.fireError('nav controller was destroyed', ti);\n      return;\n    }\n    if (ti.done) {\n      ti.done(result.hasCompleted, result.requiresTransition, result.enteringView, result.leavingView, result.direction);\n    }\n    ti.resolve(result.hasCompleted);\n    if (ti.opts.updateURL !== false && this.useRouter) {\n      const router = document.querySelector('ion-router');\n      if (router) {\n        const direction = result.direction === 'back' ? 'back' : 'forward';\n        router.navChanged(direction);\n      }\n    }\n  }\n  failed(rejectReason, ti) {\n    if (this.destroyed) {\n      this.fireError('nav controller was destroyed', ti);\n      return;\n    }\n    this.transInstr.length = 0;\n    this.fireError(rejectReason, ti);\n  }\n  fireError(rejectReason, ti) {\n    if (ti.done) {\n      ti.done(false, false, rejectReason);\n    }\n    if (ti.reject && !this.destroyed) {\n      ti.reject(rejectReason);\n    }\n    else {\n      ti.resolve(false);\n    }\n  }\n  nextTrns() {\n    // this is the framework's bread 'n butta function\n    // only one transition is allowed at any given time\n    if (this.isTransitioning) {\n      return false;\n    }\n    // there is no transition happening right now\n    // get the next instruction\n    const ti = this.transInstr.shift();\n    if (!ti) {\n      return false;\n    }\n    this.runTransition(ti);\n    return true;\n  }\n  async runTransition(ti) {\n    try {\n      // set that this nav is actively transitioning\n      this.ionNavWillChange.emit();\n      this.isTransitioning = true;\n      this.prepareTI(ti);\n      const leavingView = this.getActiveSync();\n      const enteringView = this.getEnteringView(ti, leavingView);\n      if (!leavingView && !enteringView) {\n        throw new Error('no views in the stack to be removed');\n      }\n      if (enteringView && enteringView.state === VIEW_STATE_NEW) {\n        await enteringView.init(this.el);\n      }\n      this.postViewInit(enteringView, leavingView, ti);\n      // Needs transition?\n      const requiresTransition = (ti.enteringRequiresTransition || ti.leavingRequiresTransition) &&\n        enteringView !== leavingView;\n      if (requiresTransition && ti.opts && leavingView) {\n        const isBackDirection = ti.opts.direction === 'back';\n        /**\n         * If heading back, use the entering page's animation\n         * unless otherwise specified by the developer.\n         */\n        if (isBackDirection) {\n          ti.opts.animationBuilder = ti.opts.animationBuilder || (enteringView && enteringView.animationBuilder);\n        }\n        leavingView.animationBuilder = ti.opts.animationBuilder;\n      }\n      const result = requiresTransition\n        ? await this.transition(enteringView, leavingView, ti)\n        : {\n          // transition is not required, so we are already done!\n          // they're inserting/removing the views somewhere in the middle or\n          // beginning, so visually nothing needs to animate/transition\n          // resolve immediately because there's no animation that's happening\n          hasCompleted: true,\n          requiresTransition: false\n        };\n      this.success(result, ti);\n      this.ionNavDidChange.emit();\n    }\n    catch (rejectReason) {\n      this.failed(rejectReason, ti);\n    }\n    this.isTransitioning = false;\n    this.nextTrns();\n  }\n  prepareTI(ti) {\n    const viewsLength = this.views.length;\n    ti.opts = ti.opts || {};\n    if (ti.opts.delegate === undefined) {\n      ti.opts.delegate = this.delegate;\n    }\n    if (ti.removeView !== undefined) {\n      assert(ti.removeStart !== undefined, 'removeView needs removeStart');\n      assert(ti.removeCount !== undefined, 'removeView needs removeCount');\n      const index = this.views.indexOf(ti.removeView);\n      if (index < 0) {\n        throw new Error('removeView was not found');\n      }\n      ti.removeStart += index;\n    }\n    if (ti.removeStart !== undefined) {\n      if (ti.removeStart < 0) {\n        ti.removeStart = viewsLength - 1;\n      }\n      if (ti.removeCount < 0) {\n        ti.removeCount = viewsLength - ti.removeStart;\n      }\n      ti.leavingRequiresTransition =\n        ti.removeCount > 0 && ti.removeStart + ti.removeCount === viewsLength;\n    }\n    if (ti.insertViews) {\n      // allow -1 to be passed in to auto push it on the end\n      // and clean up the index if it's larger then the size of the stack\n      if (ti.insertStart < 0 || ti.insertStart > viewsLength) {\n        ti.insertStart = viewsLength;\n      }\n      ti.enteringRequiresTransition = ti.insertStart === viewsLength;\n    }\n    const insertViews = ti.insertViews;\n    if (!insertViews) {\n      return;\n    }\n    assert(insertViews.length > 0, 'length can not be zero');\n    const viewControllers = convertToViews(insertViews);\n    if (viewControllers.length === 0) {\n      throw new Error('invalid views to insert');\n    }\n    // Check all the inserted view are correct\n    for (const view of viewControllers) {\n      view.delegate = ti.opts.delegate;\n      const nav = view.nav;\n      if (nav && nav !== this) {\n        throw new Error('inserted view was already inserted');\n      }\n      if (view.state === VIEW_STATE_DESTROYED) {\n        throw new Error('inserted view was already destroyed');\n      }\n    }\n    ti.insertViews = viewControllers;\n  }\n  getEnteringView(ti, leavingView) {\n    const insertViews = ti.insertViews;\n    if (insertViews !== undefined) {\n      // grab the very last view of the views to be inserted\n      // and initialize it as the new entering view\n      return insertViews[insertViews.length - 1];\n    }\n    const removeStart = ti.removeStart;\n    if (removeStart !== undefined) {\n      const views = this.views;\n      const removeEnd = removeStart + ti.removeCount;\n      for (let i = views.length - 1; i >= 0; i--) {\n        const view = views[i];\n        if ((i < removeStart || i >= removeEnd) && view !== leavingView) {\n          return view;\n        }\n      }\n    }\n    return undefined;\n  }\n  postViewInit(enteringView, leavingView, ti) {\n    assert(leavingView || enteringView, 'Both leavingView and enteringView are null');\n    assert(ti.resolve, 'resolve must be valid');\n    assert(ti.reject, 'reject must be valid');\n    const opts = ti.opts;\n    const insertViews = ti.insertViews;\n    const removeStart = ti.removeStart;\n    const removeCount = ti.removeCount;\n    let destroyQueue;\n    // there are views to remove\n    if (removeStart !== undefined && removeCount !== undefined) {\n      assert(removeStart >= 0, 'removeStart can not be negative');\n      assert(removeCount >= 0, 'removeCount can not be negative');\n      destroyQueue = [];\n      for (let i = 0; i < removeCount; i++) {\n        const view = this.views[i + removeStart];\n        if (view && view !== enteringView && view !== leavingView) {\n          destroyQueue.push(view);\n        }\n      }\n      // default the direction to \"back\"\n      opts.direction = opts.direction || 'back';\n    }\n    const finalBalance = this.views.length +\n      (insertViews !== undefined ? insertViews.length : 0) -\n      (removeCount !== undefined ? removeCount : 0);\n    assert(finalBalance >= 0, 'final balance can not be negative');\n    if (finalBalance === 0) {\n      console.warn(`You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.`, this, this.el);\n      throw new Error('navigation stack needs at least one root page');\n    }\n    // At this point the transition can not be rejected, any throw should be an error\n    // there are views to insert\n    if (insertViews) {\n      // add the views to the\n      let insertIndex = ti.insertStart;\n      for (const view of insertViews) {\n        this.insertViewAt(view, insertIndex);\n        insertIndex++;\n      }\n      if (ti.enteringRequiresTransition) {\n        // default to forward if not already set\n        opts.direction = opts.direction || 'forward';\n      }\n    }\n    // if the views to be removed are in the beginning or middle\n    // and there is not a view that needs to visually transition out\n    // then just destroy them and don't transition anything\n    // batch all of lifecycles together\n    // let's make sure, callbacks are zoned\n    if (destroyQueue && destroyQueue.length > 0) {\n      for (const view of destroyQueue) {\n        lifecycle(view.element, LIFECYCLE_WILL_LEAVE);\n        lifecycle(view.element, LIFECYCLE_DID_LEAVE);\n        lifecycle(view.element, LIFECYCLE_WILL_UNLOAD);\n      }\n      // once all lifecycle events has been delivered, we can safely detroy the views\n      for (const view of destroyQueue) {\n        this.destroyView(view);\n      }\n    }\n  }\n  async transition(enteringView, leavingView, ti) {\n    // we should animate (duration > 0) if the pushed page is not the first one (startup)\n    // or if it is a portal (modal, actionsheet, etc.)\n    const opts = ti.opts;\n    const progressCallback = opts.progressAnimation\n      ? (ani) => this.sbAni = ani\n      : undefined;\n    const mode = getIonMode(this);\n    const enteringEl = enteringView.element;\n    const leavingEl = leavingView && leavingView.element;\n    const animationOpts = Object.assign({ mode, showGoBack: this.canGoBackSync(enteringView), baseEl: this.el, animationBuilder: this.animation || opts.animationBuilder || config.get('navAnimation'), progressCallback, animated: this.animated && config.getBoolean('animated', true), enteringEl,\n      leavingEl }, opts);\n    const { hasCompleted } = await transition(animationOpts);\n    return this.transitionFinish(hasCompleted, enteringView, leavingView, opts);\n  }\n  transitionFinish(hasCompleted, enteringView, leavingView, opts) {\n    const cleanupView = hasCompleted ? enteringView : leavingView;\n    if (cleanupView) {\n      this.cleanup(cleanupView);\n    }\n    return {\n      hasCompleted,\n      requiresTransition: true,\n      enteringView,\n      leavingView,\n      direction: opts.direction\n    };\n  }\n  insertViewAt(view, index) {\n    const views = this.views;\n    const existingIndex = views.indexOf(view);\n    if (existingIndex > -1) {\n      // this view is already in the stack!!\n      // move it to its new location\n      assert(view.nav === this, 'view is not part of the nav');\n      views.splice(index, 0, views.splice(existingIndex, 1)[0]);\n    }\n    else {\n      assert(!view.nav, 'nav is used');\n      // this is a new view to add to the stack\n      // create the new entering view\n      view.nav = this;\n      // insert the entering view into the correct index in the stack\n      views.splice(index, 0, view);\n    }\n  }\n  removeView(view) {\n    assert(view.state === VIEW_STATE_ATTACHED || view.state === VIEW_STATE_DESTROYED, 'view state should be loaded or destroyed');\n    const views = this.views;\n    const index = views.indexOf(view);\n    assert(index > -1, 'view must be part of the stack');\n    if (index >= 0) {\n      views.splice(index, 1);\n    }\n  }\n  destroyView(view) {\n    view._destroy();\n    this.removeView(view);\n  }\n  /**\n   * DOM WRITE\n   */\n  cleanup(activeView) {\n    // ok, cleanup time!! Destroy all of the views that are\n    // INACTIVE and come after the active view\n    // only do this if the views exist, though\n    if (this.destroyed) {\n      return;\n    }\n    const views = this.views;\n    const activeViewIndex = views.indexOf(activeView);\n    for (let i = views.length - 1; i >= 0; i--) {\n      const view = views[i];\n      /**\n       * When inserting multiple views via insertPages\n       * the last page will be transitioned to, but the\n       * others will not be. As a result, a DOM element\n       * will only be created for the last page inserted.\n       * As a result, it is possible to have views in the\n       * stack that do not have `view.element` yet.\n       */\n      const element = view.element;\n      if (element) {\n        if (i > activeViewIndex) {\n          // this view comes after the active view\n          // let's unload it\n          lifecycle(element, LIFECYCLE_WILL_UNLOAD);\n          this.destroyView(view);\n        }\n        else if (i < activeViewIndex) {\n          // this view comes before the active view\n          // and it is not a portal then ensure it is hidden\n          setPageHidden(element, true);\n        }\n      }\n    }\n  }\n  canStart() {\n    return (!!this.swipeGesture &&\n      !this.isTransitioning &&\n      this.transInstr.length === 0 &&\n      this.animationEnabled &&\n      this.canGoBackSync());\n  }\n  onStart() {\n    this.queueTrns({\n      removeStart: -1,\n      removeCount: 1,\n      opts: {\n        direction: 'back',\n        progressAnimation: true\n      }\n    }, undefined);\n  }\n  onMove(stepValue) {\n    if (this.sbAni) {\n      this.sbAni.progressStep(stepValue);\n    }\n  }\n  onEnd(shouldComplete, stepValue, dur) {\n    if (this.sbAni) {\n      this.animationEnabled = false;\n      this.sbAni.onFinish(() => {\n        this.animationEnabled = true;\n      }, { oneTimeCallback: true });\n      // Account for rounding errors in JS\n      let newStepValue = (shouldComplete) ? -0.001 : 0.001;\n      /**\n       * Animation will be reversed here, so need to\n       * reverse the easing curve as well\n       *\n       * Additionally, we need to account for the time relative\n       * to the new easing curve, as `stepValue` is going to be given\n       * in terms of a linear curve.\n       */\n      if (!shouldComplete) {\n        this.sbAni.easing('cubic-bezier(1, 0, 0.68, 0.28)');\n        newStepValue += getTimeGivenProgression([0, 0], [1, 0], [0.68, 0.28], [1, 1], stepValue)[0];\n      }\n      else {\n        newStepValue += getTimeGivenProgression([0, 0], [0.32, 0.72], [0, 1], [1, 1], stepValue)[0];\n      }\n      this.sbAni.progressEnd(shouldComplete ? 1 : 0, newStepValue, dur);\n    }\n  }\n  render() {\n    return (h(\"slot\", null));\n  }\n  get el() { return getElement(this); }\n  static get watchers() { return {\n    \"swipeGesture\": [\"swipeGestureChanged\"],\n    \"root\": [\"rootChanged\"]\n  }; }\n};\nNav.style = navCss;\n\nconst navLink = (el, routerDirection, component, componentProps, routerAnimation) => {\n  const nav = el.closest('ion-nav');\n  if (nav) {\n    if (routerDirection === 'forward') {\n      if (component !== undefined) {\n        return nav.push(component, componentProps, { skipIfBusy: true, animationBuilder: routerAnimation });\n      }\n    }\n    else if (routerDirection === 'root') {\n      if (component !== undefined) {\n        return nav.setRoot(component, componentProps, { skipIfBusy: true, animationBuilder: routerAnimation });\n      }\n    }\n    else if (routerDirection === 'back') {\n      return nav.pop({ skipIfBusy: true, animationBuilder: routerAnimation });\n    }\n  }\n  return Promise.resolve(false);\n};\n\nconst NavLink = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    /**\n     * The transition direction when navigating to another page.\n     */\n    this.routerDirection = 'forward';\n    this.onClick = () => {\n      return navLink(this.el, this.routerDirection, this.component, this.componentProps, this.routerAnimation);\n    };\n  }\n  render() {\n    return (h(Host, { onClick: this.onClick }));\n  }\n  get el() { return getElement(this); }\n};\n\nexport { Nav as ion_nav, NavLink as ion_nav_link };\n"]}