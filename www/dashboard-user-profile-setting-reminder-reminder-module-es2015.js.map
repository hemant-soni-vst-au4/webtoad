{"version":3,"sources":["./src/app/dashboard/user-profile/setting/reminder/reminder.page.html","./src/app/dashboard/user-profile/setting/reminder/reminder.page.scss","./src/app/dashboard/user-profile/setting/reminder/reminder.module.ts","./src/app/dashboard/user-profile/setting/reminder/reminder.page.ts"],"names":[],"mappings":"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","file":"dashboard-user-profile-setting-reminder-reminder-module-es2015.js","sourcesContent":["export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\" mode=\\\"md\\\">\\n      <ion-button mode=\\\"md\\\" (click)=\\\"back()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"chevron-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button mode=\\\"md\\\" (click)=\\\"home()\\\">\\n        <ion-icon color=\\\"dark\\\" mode=\\\"md\\\" slot=\\\"icon-only\\\" src=\\\"../../../../../assets/images/home.svg\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n  <ion-grid>\\n    <ion-row class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n      <ion-col sizeXs=\\\"12\\\" sizeSm=\\\"12\\\" sizeLg=\\\"6\\\" sizeMd=\\\"7\\\" sizeXl=\\\"4\\\" class=\\\"ion-align-self-center\\\">\\n        <h1 class=\\\"ion-no-margin\\\"><strong>Reminder</strong></h1>\\n      </ion-col>\\n    </ion-row>\\n\\n    <ion-row class=\\\"reminder-block ion-align-items-center\\\">\\n      <ion-col class=\\\"ion-align-self-center\\\">\\n        <ion-row *ngIf=\\\"reminderTime === undefined; else gotReminder\\\"\\n          class=\\\"ion-align-items-center ion-justify-content-center ion-text-center\\\">\\n          <ion-col sizeXs=\\\"12\\\" sizeSm=\\\"12\\\" sizeLg=\\\"6\\\" sizeMd=\\\"7\\\" sizeXl=\\\"4\\\" class=\\\"ion-align-self-center\\\">\\n            <ion-icon class=\\\"alarm\\\" src=\\\"../../../../../assets/images/alarm.svg\\\"></ion-icon>\\n            <h3 class=\\\"ion-text-center ion-margin-bottom\\\">\\n              Would you like to receive a reminder?\\n            </h3>\\n          </ion-col>\\n        </ion-row>\\n        <ng-template #gotReminder>\\n          <ion-row class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n            <ion-col sizeXs=\\\"12\\\" sizeSm=\\\"12\\\" sizeLg=\\\"6\\\" sizeMd=\\\"7\\\" sizeXl=\\\"4\\\"\\n              class=\\\"ion-align-self-center ion-text-center ion-margin-top\\\">\\n              <ion-icon class=\\\"alarm\\\" src=\\\"../../../../../assets/images/alarm.svg\\\"></ion-icon>\\n              <h3 class=\\\"ion-text-center ion-margin-bottom\\\">\\n                We will send you a nudge <br />\\n                at\\n                <ion-text class=\\\"c-orange\\\">\\n                  {{ reminderTime | date: 'shortTime' }}\\n                </ion-text>\\n                everyday\\n              </h3>\\n            </ion-col>\\n          </ion-row>\\n        </ng-template>\\n\\n        <ion-row *ngIf=\\\"reminderTime === undefined\\\" class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n          <ion-col sizeXs=\\\"10\\\" sizeSm=\\\"10\\\" sizeMd=\\\"7\\\" sizeLg=\\\"6\\\" sizeXl=\\\"4\\\" class=\\\"ion-align-self-center\\\">\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label color=\\\"danger\\\">Yes, set a reminder. <br />\\n                <ion-text color=\\\"medium\\\">(Push notification)</ion-text>\\n              </ion-label>\\n              <ion-toggle mode=\\\"ios\\\" checked=\\\"false\\\" (ionChange)=\\\"onChangeReminder($event)\\\">\\n              </ion-toggle>\\n            </ion-item>\\n          </ion-col>\\n        </ion-row>\\n\\n        <ion-row *ngIf=\\\"reminderTime !== undefined\\\" class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n          <ion-col sizeXs=\\\"4\\\" sizeSm=\\\"4\\\" sizeMd=\\\"7\\\" sizeLg=\\\"6\\\" sizeXl=\\\"4\\\" class=\\\"ion-text-center ion-align-self-center\\\">\\n            <ion-item lines=\\\"none\\\">\\n              <ion-toggle mode=\\\"ios\\\" checked=\\\"true\\\" (ionChange)=\\\"onChangeReminder($event)\\\"></ion-toggle>\\n            </ion-item>\\n            <a class=\\\"c-orange ion-margin-top\\\" (click)=\\\"setReminder()\\\">Edit</a>\\n          </ion-col>\\n        </ion-row>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\";","export default \".reminder-block {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  margin: auto;\\n  align-items: center;\\n  display: flex;\\n  justify-content: center;\\n}\\n.reminder-block ion-toggle {\\n  --background-checked: var(--color-orange);\\n  margin: 0 auto;\\n}\\n.reminder-block .alarm {\\n  font-size: 30px;\\n}\\n.reminder-block h3 {\\n  margin-top: 5px;\\n  font-weight: 400;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3JlbWluZGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBQ0EsTUFBQTtFQUNBLFNBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtBQUNGO0FBQ0U7RUFDRSx5Q0FBQTtFQUNBLGNBQUE7QUFDSjtBQUNFO0VBQ0UsZUFBQTtBQUNKO0FBQ0U7RUFDRSxlQUFBO0VBQ0EsZ0JBQUE7QUFDSiIsImZpbGUiOiJyZW1pbmRlci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucmVtaW5kZXItYmxvY2sge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgbWFyZ2luOiBhdXRvO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICBpb24tdG9nZ2xlIHtcbiAgICAtLWJhY2tncm91bmQtY2hlY2tlZDogdmFyKC0tY29sb3Itb3JhbmdlKTtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgfVxuICAuYWxhcm0ge1xuICAgIGZvbnQtc2l6ZTogMzBweDtcbiAgfVxuICBoMyB7XG4gICAgbWFyZ2luLXRvcDogNXB4O1xuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gIH1cbn1cbiJdfQ== */\";","import {DatePicker} from '@ionic-native/date-picker/ngx'\nimport {NgModule} from '@angular/core'\nimport {CommonModule, DatePipe} from '@angular/common'\nimport {FormsModule} from '@angular/forms'\nimport {Routes, RouterModule} from '@angular/router'\n\nimport {IonicModule} from '@ionic/angular'\n\nimport {ReminderPage} from './reminder.page'\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReminderPage,\n  },\n]\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, RouterModule.forChild(routes)],\n  declarations: [ReminderPage],\n  providers: [DatePicker, DatePipe],\n})\nexport class ReminderPageModule {}\n","import {DatePicker} from '@ionic-native/date-picker/ngx'\nimport {NavController, AlertController, Platform} from '@ionic/angular'\nimport {Router} from '@angular/router'\nimport {SharedService} from './../../../../services/shared.service'\nimport {Component, OnInit} from '@angular/core'\nimport {DatePipe} from '@angular/common'\nimport {Plugins} from '@capacitor/core'\nconst {LocalNotifications} = Plugins\n\n@Component({\n  selector: 'app-reminder',\n  templateUrl: './reminder.page.html',\n  styleUrls: ['./reminder.page.scss'],\n})\nexport class ReminderPage implements OnInit {\n  reminder: boolean = false\n  reminderTime\n  isDesktop = false\n  isStart = false\n\n  constructor(\n    public router: Router,\n    public alertController: AlertController,\n    private datePicker: DatePicker,\n    private datePipe: DatePipe,\n    public platform: Platform,\n    public sharedService: SharedService,\n    public navController: NavController,\n  ) {}\n  ngOnInit() {}\n\n  ionViewWillEnter() {\n    LocalNotifications.requestPermission()\n    Promise.all([this.sharedService.getNativeStorage('reminder')]).then(([reminder]) => {\n      if (reminder?.data) {\n        this.reminderTime = new Date(reminder.data).toISOString()\n        this.reminder = true\n        this.setReminderTime(new Date(reminder.data))\n      }\n    })\n  }\n\n  async setReminder() {\n    try {\n      const date = await this.datePicker.show({\n        date: new Date(),\n        mode: 'time',\n        androidTheme: this.datePicker.ANDROID_THEMES.THEME_DEVICE_DEFAULT_LIGHT,\n      })\n\n      this.sharedService.setNativeStorage('reminder', date.getTime())\n\n      await this.setReminderTime(date)\n      this.reminderTime = date.getTime()\n      this.reminder = true\n\n      const alert = await this.alertController.create({\n        header: 'Reminder is set!',\n        message:\n          'Perfect. We will send you a nudge at <strong>' +\n          this.datePipe.transform(date, 'h:mm a') +\n          '</strong> everyday',\n        cssClass: 'user-level-alert',\n        buttons: ['OK'],\n      })\n\n      await alert.present()\n    } catch (err) {\n      console.log('Error occurred while getting date: ', err)\n    }\n  }\n\n  onChangeReminder(event) {\n    console.log(event)\n    if (event.detail.checked === false) {\n      this.sharedService.removeNativeStorage('reminder')\n      this.reminder = false\n      this.reminderTime = undefined\n      LocalNotifications.cancel({notifications: [{id: '42'}]})\n    } else if (event.detail.checked) {\n      this.setReminder()\n    } else {\n      this.sharedService.removeNativeStorage('reminder')\n      this.reminderTime = undefined\n      LocalNotifications.cancel({notifications: [{id: '42'}]})\n    }\n  }\n\n  home() {\n    this.router.navigate(['/dashboard/lessons'])\n    this.navController.setDirection('root')\n  }\n\n  back() {\n    this.navController.setDirection('back')\n    this.router.navigate(['/setting'])\n  }\n\n  async setReminderTime(date) {\n    const time = new Date(date.getTime())\n    const notifs = await LocalNotifications.schedule({\n      notifications: [\n        {\n          id: 42,\n          title: 'SpeakyPeaky',\n          body: '20 mins a day = big gains in 3 months',\n          schedule: {\n            repeats: true,\n            every: 'day',\n            on: {\n              hour: time.getHours(),\n              minute: time.getMinutes(),\n            },\n          },\n          sound: null,\n          attachments: null,\n          actionTypeId: '',\n          extra: null,\n        },\n      ],\n    })\n\n    console.log('scheduled notifications', notifs)\n  }\n}\n"],"sourceRoot":"webpack:///"}