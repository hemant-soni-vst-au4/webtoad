{"version":3,"sources":["webpack:///src/app/dashboard/lessons/lesson-details/lesson-details.module.ts","webpack:///src/app/dashboard/lessons/lesson-details/lesson-details.page.tsx","webpack:///src/app/dashboard/lessons/lesson-details/lesson-details.page.scss","webpack:///src/app/services/comments.service.ts"],"names":["routes","path","component","LessonDetailsPageModule","imports","forChild","declarations","providers","schemas","Introduction","lessonDetails","navCtrl","state","navController","isLoading","undefined","className","size","animated","style","width","videoLevel","introduction","tags","videoLevelLabel","scenes","length","id","textDecoration","display","onClick","navigateBack","lessonId","getLessonUsageMessage","profile","isDraft","isCompletedLesson","console","log","currentPackage","subscriptionProductId","subHeader","message","action","header","total","trialLessonLimit","left","completedLesson","subscriptionLesson","StartButton","onStart","present","onCompleted","data","addToMyLesson","isMy","fetchPolicy","loading","refetch","isCompleted","handleStart","variables","_id","handleStartClick","mode","cssClass","buttons","text","role","handler","navigateForward","color","shape","expand","disabled","slot","icon","LessonDetails","subLessonId","sharedService","platform","useState","segment","setSegment","setLessonDetails","showAlert","setShowAlert","playing","setPlaying","playedSeconds","setPlayedSeconds","lesson","isSaved","setLessonSaved","setSave","saveLoading","lessonRes","skip","playerRef","useRef","type","handleUnstarted","map","s","end","start","firstScene","scenePlayedSeconds","Math","max","playedRate","handleSaveLesson","isSave","error","handleProgress","current","seekTo","handleOnReady","player","floor","getNativeStorage","helpDone","isHelpModeDone","Boolean","steps","element","popover","title","description","position","showHelpGuide","onClose","setNativeStorage","pop","lessonName","textAlign","navigateRoot","src","sizeXs","sizeSm","sizeMd","sizeLg","sizeXl","ref","url","youtubeId","controls","height","config","youtube","playerVars","showinfo","disablekb","cc_load_policy","origin","window","location","onUnstarted","progressInterval","onProgress","onReady","isOpen","onDidDismiss","flex","fill","curTime","getCurrentTime","time","value","onIonChange","e","detail","courseId","containerElementName","LessonDetailsPage","route","gaTrackView","changes","render","containerRef","nativeElement","params","subscribe","JSON","parse","Error","selector","template","encapsulation","None","CommentsService","apiService","page","post","providedIn"],"mappings":"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","file":"dashboard-lessons-lesson-details-lesson-details-module-es5.js","sourcesContent":["import {SubscriptionService} from './../../../services/subscription.service'\nimport {OnBoardingService} from './../../../services/on-boarding.service'\nimport {CommentsService} from './../../../services/comments.service'\n// import {IntroductionComponent} from './introduction/introduction.component'\nimport {LessonsService} from './../../../services/lessons.service'\nimport {NgModule, CUSTOM_ELEMENTS_SCHEMA} from '@angular/core'\nimport {CommonModule} from '@angular/common'\nimport {FormsModule} from '@angular/forms'\nimport {Routes, RouterModule} from '@angular/router'\n\nimport {IonicModule} from '@ionic/angular'\n\nimport {LessonDetailsPage} from './lesson-details.page'\nimport {NgxY2PlayerModule} from 'ngx-y2-player'\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LessonDetailsPage,\n  },\n]\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    NgxY2PlayerModule,\n  ],\n  declarations: [LessonDetailsPage],\n  // entryComponents: [],\n  providers: [LessonsService, CommentsService, OnBoardingService, SubscriptionService],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n})\nexport class LessonDetailsPageModule {}\n","import React from 'react'\nimport {render, unmountComponentAtNode} from 'react-dom'\nimport {SharedService} from './../../../services/shared.service'\nimport {ActivatedRoute} from '@angular/router'\nimport {\n  Component,\n  OnInit,\n  ViewChild,\n  OnDestroy,\n  SimpleChanges,\n  ElementRef,\n  OnChanges,\n  AfterViewInit,\n  ViewEncapsulation,\n} from '@angular/core'\nimport AppProvider from 'src/reactapp/AppProvider'\nimport {\n  IonAlert,\n  IonButton,\n  IonButtons,\n  IonCol,\n  IonContent,\n  IonFooter,\n  IonGrid,\n  IonHeader,\n  IonIcon,\n  IonLabel,\n  IonPage,\n  IonProgressBar,\n  IonRippleEffect,\n  IonRow,\n  IonSegment,\n  IonSegmentButton,\n  IonSkeletonText,\n  IonSpinner,\n  IonText,\n  IonTitle,\n  IonToolbar,\n  useIonAlert,\n} from '@ionic/react'\nimport {chevronBack, play} from 'ionicons/icons'\nimport ReactPlayer from 'react-player'\nimport {Comments} from 'src/app/dashboard/lessons/lesson-details/comments/Comments'\n\nimport {useProfile, useStore} from 'src/reactapp/useStore'\nimport {\n  Lesson,\n  useAddToMyLessonMutation,\n  useGetLessonDeatilQuery,\n  useGetProfileLazyQuery,\n  useGetProfileQuery,\n  useSetLessonSavedMutation,\n} from 'src/reactapp/types-and-hooks'\nimport clsx from 'clsx'\n\nconst Introduction = ({lessonDetails}) => {\n  const navCtrl = useStore((state) => state.navController)\n  const isLoading = lessonDetails === undefined\n  if (isLoading) {\n    return (\n      <>\n        <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n          <IonCol size=\"12\" className=\"ion-align-self-center\">\n            <h6 className=\"lesson-heading\">Introduction</h6>\n            <div>\n              <IonSkeletonText animated style={{width: '100%'}}></IonSkeletonText>\n              <IonSkeletonText animated style={{width: '100%'}}></IonSkeletonText>\n              <IonSkeletonText animated style={{width: '80%'}}></IonSkeletonText>\n            </div>\n          </IonCol>\n        </IonRow>\n        <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n          <IonCol size=\"12\" className=\"ion-align-self-center\">\n            <div>\n              <IonSkeletonText animated style={{width: '100%'}}></IonSkeletonText>\n            </div>\n          </IonCol>\n        </IonRow>\n        <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n          <IonCol size=\"12\" className=\"ion-align-self-center\">\n            <h6 className=\"lesson-heading\">Level</h6>\n            <div>\n              <IonSkeletonText animated style={{width: '40%'}}></IonSkeletonText>\n            </div>\n          </IonCol>\n        </IonRow>\n        <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n          <IonCol size=\"12\" className=\"ion-align-self-center\">\n            <h6 className=\"lesson-heading\">Number of Scenes</h6>\n            <div>\n              <IonSkeletonText animated style={{width: '40%'}}></IonSkeletonText>\n            </div>\n          </IonCol>\n        </IonRow>\n\n        <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n          <IonCol size=\"12\" className=\"ion-align-self-center\">\n            <div>\n              <IonSkeletonText animated style={{width: '40%'}}></IonSkeletonText>\n            </div>\n          </IonCol>\n        </IonRow>\n      </>\n    )\n  }\n\n  const videoLevel =\n    lessonDetails.videoLevel === 'Elementary'\n      ? 'Upper-beginner'\n      : lessonDetails.videoLevel\n  return (\n    <>\n      <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n        <IonCol size=\"12\" className=\"ion-align-self-center\">\n          <h6 className=\"lesson-heading\">Introduction</h6>\n          <IonText>{lessonDetails?.introduction}</IonText>\n        </IonCol>\n      </IonRow>\n      <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n        <IonCol size=\"12\" className=\"ion-align-self-center\">\n          <p className=\"c-orange\">{lessonDetails?.tags}</p>\n        </IonCol>\n      </IonRow>\n      <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n        <IonCol size=\"12\" className=\"ion-align-self-center\">\n          <h6 className=\"lesson-heading\">Level</h6>\n          <IonText>{lessonDetails?.videoLevelLabel}</IonText>\n        </IonCol>\n      </IonRow>\n      <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n        <IonCol size=\"12\" className=\"ion-align-self-center\">\n          <h6 className=\"lesson-heading\">Number of Scenes</h6>\n          <IonText>\n            {lessonDetails.scenes?.length} scenes\n            <small>(~20-30 mins. Each scene is ~3 mins to study)</small>\n          </IonText>\n        </IonCol>\n      </IonRow>\n\n      <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n        <IonCol size=\"12\" className=\"ion-align-self-center\">\n          <p\n            className=\"lesson-heading pointer\"\n            id=\"course-page\"\n            style={{textDecoration: 'underline', display: 'inline-block'}}\n            onClick={() => {\n              navCtrl.navigateBack([\n                '/course-details',\n                lessonDetails.lessonId,\n                'myCourse',\n              ])\n            }}\n          >\n            Go to the course page\n          </p>\n        </IonCol>\n      </IonRow>\n    </>\n  )\n}\n\nfunction getLessonUsageMessage(profile, isDraft, isCompletedLesson) {\n  console.log({profile})\n  let {currentPackage, subscriptionProductId} = profile\n  // currentPackage = 'Trial'\n  // subscriptionProductId = 'monthly'\n  // console.log({profile, currentPackage, subscriptionProductId})\n\n  if (isDraft === true) {\n    return {\n      subHeader: '',\n      message: \"1 lesson won't be used\",\n      action: 'start',\n    }\n  }\n\n  if (isCompletedLesson) {\n    let message = ''\n    if (\n      currentPackage === 'Subscription' &&\n      (subscriptionProductId !== 'yearly' || subscriptionProductId !== '6_months')\n    ) {\n      message = 'Youâ€™ve already completed this lesson. Do you want to re-study it?'\n    } else {\n      message = \"You've studied this. <br/> 1 lesson won't be used\"\n    }\n    return {\n      subHeader: '',\n      message: message,\n      action: 'start',\n    }\n  }\n\n  if (currentPackage === 'SubscriptionExpired') {\n    return {\n      header: 'Subscription expired!',\n      message: 'Looks like your subscription has expired. Kindly renew it to continue.',\n      action: 'subscribe',\n    }\n  }\n\n  if (currentPackage === 'Trial') {\n    const total = profile.trialLessonLimit\n    const left = total - profile.completedLesson\n    if (left <= 0) {\n      return {\n        header: 'Speaky Peaky',\n        message:\n          \"Hooray! You've finished all free lessons. Please purchase a subscription for more lessons\",\n        action: 'subscribe',\n      }\n    }\n    // prettier-ignore\n    return {\n      subHeader: 'You will use 1 lesson.',\n      message: `<b style=\"color:#E22D2D\">${left} out of ${total}</b> ${left <= 1 ? 'lesson is' : 'lessons are'} left.`,\n      action: 'start'\n    }\n  }\n\n  if (currentPackage === 'Subscription') {\n    let subHeader = ''\n    let message = ''\n    if (subscriptionProductId === 'yearly' || subscriptionProductId === '6_months') {\n      message = 'Are you sure you want to study this lesson?'\n    } else if (\n      subscriptionProductId === 'monthly' ||\n      subscriptionProductId === undefined ||\n      subscriptionProductId === null\n    ) {\n      subHeader = 'You will use 1 lesson.'\n\n      const total = profile.subscriptionLesson\n      const left = total - profile.completedLesson\n\n      if (left <= 0) {\n        return {\n          header: 'Speaky Peaky',\n          message: \"Hooray! You've finished all lessons.\",\n        }\n      }\n\n      // prettier-ignore\n      message = `<b style=\"color:#E22D2D\">${left} out of ${total}</b> ${left <= 1 ? 'lesson is' : 'lessons are'} left this month.`\n    }\n\n    return {\n      subHeader,\n      message,\n      action: 'start',\n    }\n  }\n  return {\n    subHeader: 'none',\n    message: 'none',\n  }\n}\n\nfunction StartButton({isDraft, lessonDetails, onStart}) {\n  const navController = useStore((state) => state.navController)\n  const [present] = useIonAlert()\n  const [addToMyLesson] = useAddToMyLessonMutation({\n    onCompleted: (data) => {\n      if (data.addToMyLesson.isMy) {\n        onStart()\n      }\n    },\n  })\n  // const {post: addMyCourseLesson, response} = useFetch('/lesson/add-course-lesson')\n  const {\n    data: {profile},\n    loading,\n    refetch,\n  } = useGetProfileQuery({fetchPolicy: 'cache-and-network'})\n  const isCompletedLesson = lessonDetails.isCompleted\n\n  async function handleStart() {\n    if (isDraft) {\n      return onStart()\n    }\n    addToMyLesson({variables: {lessonId: lessonDetails._id}})\n  }\n\n  async function handleStartClick() {\n    try {\n      // refetch()\n      // no free tiral\n      // expired\n\n      const {subHeader, message, action} = getLessonUsageMessage(\n        profile,\n        isDraft,\n        isCompletedLesson,\n      )\n      console.log({subHeader, message, action})\n      if (action === 'start') {\n        await present({\n          mode: 'md',\n          cssClass: 'startLessonAlert',\n          subHeader: subHeader,\n          message: message,\n          buttons: [\n            {\n              text: '',\n              role: 'cancel',\n              cssClass: 'startLessonCancelBtn',\n            },\n            {\n              text: 'START',\n              cssClass: 'startLessonBtn',\n              handler: () => {\n                handleStart()\n              },\n            },\n          ],\n        })\n      } else if (action === 'subscribe') {\n        await present({\n          mode: 'md',\n          cssClass: 'startLessonAlert',\n          subHeader: subHeader,\n          message: message,\n          buttons: [\n            {\n              text: '',\n              role: 'cancel',\n              cssClass: 'startLessonCancelBtn',\n            },\n\n            {\n              text: 'Subscribe',\n              cssClass: 'startLessonBtn',\n              handler: () => {\n                navController.navigateForward('/subscriptionplans')\n              },\n            },\n          ],\n        })\n      } else {\n        await present({\n          mode: 'md',\n          cssClass: 'startLessonAlert',\n          subHeader: subHeader,\n          message: message,\n          buttons: [\n            {\n              text: '',\n              role: 'cancel',\n              cssClass: 'startLessonCancelBtn',\n            },\n          ],\n        })\n      }\n    } catch {}\n  }\n\n  return (\n    <>\n      <IonButton\n        mode=\"ios\"\n        color=\"danger\"\n        shape=\"round\"\n        expand=\"block\"\n        onClick={handleStartClick}\n        disabled={loading}\n      >\n        <IonIcon slot=\"start\" icon={play}></IonIcon>\n        <strong>START</strong>\n      </IonButton>\n    </>\n  )\n}\n\nconst LessonDetails: React.FC<any> = ({subLessonId, isDraft}) => {\n  const navController = useStore((state) => state.navController)\n  const sharedService = useStore((state) => state.sharedService)\n  const platform = useStore((state) => state.platform)\n  const [segment, setSegment] = React.useState('introduction')\n  const [lessonDetails, setLessonDetails] = React.useState<Lesson>()\n  const [showAlert, setShowAlert] = React.useState(false)\n  const [playing, setPlaying] = React.useState(false)\n  // const {profile} = useProfile()\n  const {\n    data: {profile},\n  } = useGetProfileQuery()\n  const [playedSeconds, setPlayedSeconds] = React.useState(0)\n  const [setSave, {loading: saveLoading}] = useSetLessonSavedMutation({\n    onCompleted: (data) => {\n      setLessonDetails((lesson) => ({...lesson, isSaved: data.setLessonSaved.isSaved}))\n    },\n  })\n  const lessonRes = useGetLessonDeatilQuery({\n    // fetchPolicy: 'cache-and-network',\n    variables: {\n      id: subLessonId,\n    },\n    onCompleted: (data) => {\n      console.log(data.lesson)\n      setLessonDetails(data.lesson as Lesson)\n    },\n    skip: !subLessonId,\n  })\n\n  // console.log({lessonRes})\n\n  const playerRef = React.useRef<ReactPlayer>(null)\n\n  if (!lessonDetails) {\n    return <IonProgressBar type=\"indeterminate\" />\n  }\n\n  function handleUnstarted() {\n    console.log('Unstarted', {playing})\n    // if (playing) {\n    //   const st = playerRef.current?.getCurrentTime()\n    //   setTimeout(() => {\n    //     const ed = playerRef.current?.getCurrentTime()\n    //     if (st === ed) {\n    //       setPlaying(false)\n    //       setShowAlert(true)\n    //     }\n    //   }, 1200)\n    // }\n  }\n\n  // console.log({lessonDetails})\n  const scenes = lessonDetails.scenes.map((s: any) => ({...s, length: s.end - s.start}))\n  const firstScene = scenes[0]\n  const scenePlayedSeconds = Math.max(playedSeconds - firstScene.start, 0)\n  const playedRate = scenePlayedSeconds / 20 || 0\n\n  async function handleSaveLesson() {\n    try {\n      setSave({\n        variables: {\n          id: subLessonId,\n          isSave: !lessonDetails.isSaved,\n        },\n      })\n\n      // await loadData()\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  function handleProgress(data: any) {\n    setPlayedSeconds(data.playedSeconds)\n\n    if (data.playedSeconds >= firstScene.start + 20) {\n      setPlaying(false)\n      playerRef.current?.seekTo(firstScene.start)\n    }\n  }\n  async function handleOnReady(player: ReactPlayer) {\n    try {\n      player.seekTo(Math.floor(firstScene.start))\n      const helpDone = await sharedService.getNativeStorage('isHelpModeDone')\n      const isHelpModeDone = Boolean(helpDone?.data)\n      if (!isHelpModeDone) {\n        const steps = [\n          {\n            element: '#highlight-save-lesson-icon',\n            popover: {\n              title: 'Save for later',\n              description: 'You can save lesson for later.',\n              position: 'left',\n            },\n          },\n          {\n            element: '#highlight-comment',\n            popover: {\n              title: 'Comments',\n              description: 'See what other people had to say about this lesson.',\n              position: 'top-right',\n            },\n          },\n        ]\n\n        sharedService.showHelpGuide({\n          steps,\n          onClose: () => {\n            setPlaying(true)\n            sharedService.setNativeStorage('isHelpModeDone', true)\n          },\n        })\n      } else {\n        setPlaying(true)\n      }\n    } catch {}\n  }\n  // const isNew = !lessonDetails.completedLesson\n  // const isSaved = saveLoading ? !lessonDetails.isSaved : lessonDetails.isSaved\n  const isSaved = lessonDetails.isSaved\n\n  return (\n    <IonPage className=\"lesson-details-page\">\n      <IonHeader mode=\"ios\">\n        <IonToolbar mode=\"ios\">\n          <IonButtons slot=\"start\">\n            <IonButton\n              mode=\"md\"\n              onClick={() => {\n                navController.pop()\n              }}\n            >\n              <IonIcon color=\"dark\" slot=\"icon-only\" icon={chevronBack}></IonIcon>\n            </IonButton>\n          </IonButtons>\n          <IonTitle>{lessonDetails.lessonName}</IonTitle>\n          <div style={{textAlign: 'center'}}></div>\n          <IonButtons slot=\"end\">\n            <IonButton\n              mode=\"md\"\n              onClick={() => {\n                navController.navigateRoot('/dashboard/lessons')\n              }}\n            >\n              <IonIcon\n                color=\"dark\"\n                mode=\"md\"\n                slot=\"icon-only\"\n                src=\"/assets/images/home.svg\"\n              ></IonIcon>\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        {/* <HelpGuide />\n        {isNew && subscription.subscriptionStatus === 'SubscriptionExpired' && (\n          <SubscriptionExpiredAlerts />\n        )} */}\n        {/* {isNew && subscription.trialEnd && <LessonEndAlerts />} */}\n        <IonGrid className=\"ion-no-padding\">\n          <IonRow>\n            <IonCol className=\"ion-no-padding\">\n              <IonRow\n                // *ngIf=\"isLoaded; else loadingPlaceholder\"\n\n                className=\"lesson ion-align-items-center ion-justify-content-center\"\n              >\n                <IonCol\n                  sizeXs=\"12\"\n                  sizeSm=\"12\"\n                  sizeMd=\"10\"\n                  sizeLg=\"8\"\n                  sizeXl=\"8\"\n                  className=\"ion-align-self-center ion-no-padding youtube-container\"\n\n                  // #container\n                >\n                  <div className=\"player-wrapper\">\n                    <ReactPlayer\n                      ref={playerRef}\n                      url={`https://www.youtube.com/watch?v=${lessonDetails.youtubeId}`}\n                      controls={false}\n                      // playbackRate={2}\n                      playing={playing}\n                      width=\"100%\"\n                      height=\"auto\"\n                      // light\n                      config={{\n                        youtube: {\n                          playerVars: {\n                            showinfo: 0,\n                            disablekb: 1,\n                            controls: 0,\n                            cc_load_policy: 0,\n                            origin: window.location.origin,\n                          },\n                          // embedOptions: {},\n                          onUnstarted: handleUnstarted,\n                        },\n                      }}\n                      progressInterval={500}\n                      // onPlay={}\n                      onProgress={handleProgress}\n                      onReady={handleOnReady}\n                    />\n                    <div className=\"player-overlay\">\n                      <span\n                        id=\"highlight-save-lesson-icon\"\n                        onClick={handleSaveLesson}\n                        className={clsx(\n                          'ion-activatable ripple-parent',\n                          saveLoading && 'save-loading',\n                        )}\n                      >\n                        {/* <IonSpinner /> */}\n                        {saveLoading ? (\n                          <IonSpinner color=\"medium\" />\n                        ) : isSaved ? (\n                          <IonIcon src=\"/assets/images/like-active.svg\"></IonIcon>\n                        ) : (\n                          <IonIcon src=\"/assets/images/like_inactive.svg\"></IonIcon>\n                        )}\n                        <IonRippleEffect />\n                      </span>\n                    </div>\n                  </div>\n                </IonCol>\n              </IonRow>\n              <IonAlert\n                isOpen={showAlert}\n                onDidDismiss={() => setShowAlert(false)}\n                cssClass=\"my-custom-class\"\n                header={'Can not Autoplay!'}\n                message={\n                  'Autoplay is not allowed without <strong>User interacts</strong>!!!'\n                }\n                buttons={[\n                  {\n                    text: 'Cancel',\n                    role: 'cancel',\n                    cssClass: 'secondary',\n                  },\n                  {\n                    text: 'Play',\n                    handler: () => {\n                      setPlaying(true)\n                    },\n                  },\n                ]}\n              />\n\n              <IonRow\n                // *ngIf=\"isLoaded\"\n                className=\"ion-align-items-center ion-justify-content-center\"\n              >\n                <IonCol\n                  sizeXs=\"12\"\n                  sizeSm=\"12\"\n                  sizeMd=\"10\"\n                  sizeLg=\"8\"\n                  sizeXl=\"8\"\n                  className=\"ion-align-self-center ion-no-padding\"\n                >\n                  <div className=\"playing-progress-bar\" style={{width: '100%'}}>\n                    <div className={`scene-bar active`} style={{flex: 1}}>\n                      <div\n                        className=\"scene-progress\"\n                        style={{\n                          width: `${playedRate * 100}%`,\n                        }}\n                      />\n                    </div>\n                  </div>\n                  <IonRow className=\"youtube-handler ion-align-items-center ion-justify-content-center\">\n                    <IonCol\n                      size=\"5\"\n                      className=\"ion-text-center ion-align-self-center ion-no-padding\"\n                    >\n                      <IonButton\n                        fill=\"clear\"\n                        onClick={() => {\n                          const curTime = playerRef.current?.getCurrentTime() || 0\n                          const time = Math.max(curTime - 3, Math.floor(firstScene.start))\n                          playerRef.current?.seekTo(time)\n                          setPlayedSeconds(time)\n                        }}\n                      >\n                        <IonIcon src=\"/assets/images/lessons/3seconds-back.svg\"></IonIcon>\n                      </IonButton>\n                    </IonCol>\n                    <IonCol\n                      size=\"2\"\n                      className=\"ion-text-center ion-align-self-center ion-no-padding\"\n                    >\n                      {playing ? (\n                        <IonButton fill=\"clear\" onClick={() => setPlaying(false)}>\n                          <IonIcon src=\"/assets/images/lessons/pause-lesson.svg\"></IonIcon>\n                        </IonButton>\n                      ) : (\n                        <IonButton fill=\"clear\" onClick={() => setPlaying(true)}>\n                          <IonIcon src=\"/assets/images/lessons/play-lesson.svg\"></IonIcon>\n                        </IonButton>\n                      )}\n                    </IonCol>\n                    <IonCol\n                      size=\"5\"\n                      className=\"ion-align-self-center ion-no-padding\"\n                    ></IonCol>\n                  </IonRow>\n                </IonCol>\n              </IonRow>\n\n              <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n                <IonCol\n                  size-xs=\"12\"\n                  size-sm=\"12\"\n                  size-md=\"10\"\n                  size-xl=\"8\"\n                  size-lg=\"8\"\n                  className=\"ion-align-self-center ion-no-padding\"\n                >\n                  <IonSegment\n                    color=\"danger\"\n                    mode=\"md\"\n                    value={segment}\n                    onIonChange={(e) => setSegment(e.detail.value)}\n                  >\n                    <IonSegmentButton mode=\"md\" value=\"introduction\">\n                      <IonLabel>Lesson Intro</IonLabel>\n                    </IonSegmentButton>\n                    <IonSegmentButton id=\"highlight-comment\" mode=\"md\" value=\"comments\">\n                      <IonLabel>Comments</IonLabel>\n                    </IonSegmentButton>\n                  </IonSegment>\n                </IonCol>\n              </IonRow>\n            </IonCol>\n          </IonRow>\n\n          <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n            <IonCol\n              className=\"ion-align-self-center ion-padding-end ion-padding-start\"\n              size=\"12\"\n            >\n              <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n                <IonCol\n                  size-xs=\"12\"\n                  size-sm=\"12\"\n                  size-md=\"10\"\n                  size-xl=\"8\"\n                  size-lg=\"8\"\n                  className=\"ion-align-self-center\"\n                >\n                  {lessonDetails &&\n                    (segment === 'introduction' ? (\n                      <div>\n                        <Introduction\n                          lessonDetails={lessonDetails}\n                          // [subLessonDetails]=\"subLessonDetails\"\n                        />\n                      </div>\n                    ) : (\n                      <Comments\n                        lessonId={lessonDetails?.courseId}\n                        subLessonId={lessonDetails?._id}\n                        profile={profile}\n                        platform={platform}\n                      />\n                    ))}\n                </IonCol>\n              </IonRow>\n            </IonCol>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n      <IonFooter mode=\"ios\">\n        <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n          <IonCol\n            size-xs=\"12\"\n            size-sm=\"12\"\n            size-md=\"6\"\n            size-xl=\"4\"\n            size-lg=\"4\"\n            className=\"ion-align-self-center\"\n          >\n            <StartButton\n              isDraft={isDraft}\n              lessonDetails={lessonDetails}\n              onStart={() => {\n                setPlaying(false)\n                navController.navigateForward([\n                  '/lesson-steps',\n                  lessonDetails._id,\n                  isDraft,\n                ])\n              }}\n            />\n          </IonCol>\n        </IonRow>\n      </IonFooter>\n    </IonPage>\n  )\n}\n\nconst containerElementName = 'rcLessonDetails'\n@Component({\n  selector: 'app-lesson-details',\n  template: `<div #${containerElementName}></div>`,\n  styleUrls: ['./comments/Comments.scss', './lesson-details.page.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class LessonDetailsPage implements OnInit, OnDestroy, OnChanges, AfterViewInit {\n  @ViewChild(containerElementName, {static: false}) containerRef: ElementRef\n\n  profile\n  isDraft = false\n  subLessonId\n\n  constructor(private route: ActivatedRoute, public sharedService: SharedService) {\n    this.sharedService.gaTrackView('Lesson Details Start Screen')\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.render()\n  }\n\n  ngAfterViewInit() {\n    this.render()\n  }\n\n  ngOnDestroy() {\n    unmountComponentAtNode(this.containerRef.nativeElement)\n  }\n\n  private render() {\n    if (this.containerRef) {\n      render(\n        <AppProvider>\n          <LessonDetails isDraft={this.isDraft} subLessonId={this.subLessonId} />\n        </AppProvider>,\n        this.containerRef.nativeElement,\n      )\n    }\n  }\n\n  ngOnInit() {\n    this.route.params.subscribe(async (params) => {\n      try {\n        const isDraft = JSON.parse(params.isDraft)\n        this.isDraft = isDraft\n        const subLessonId = params.subLessonId\n        this.subLessonId = subLessonId\n        if (!subLessonId) {\n          throw new Error('No SubLessonId')\n        }\n        this.render()\n      } catch (error) {\n        // this.showAlertAndExit(error)\n      }\n    })\n  }\n}\n","export default \".lesson-details-page ion-spinner {\\n  display: block;\\n  margin: 0 auto;\\n  height: 275px;\\n}\\n.lesson-details-page #highlight-save-lesson-icon {\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n  padding: 7px 6px 0px 6px;\\n  border-radius: 25px;\\n  background: #ffffff;\\n  cursor: pointer;\\n}\\n.lesson-details-page #highlight-save-lesson-icon ion-icon {\\n  font-size: 25px;\\n}\\n.lesson-details-page .youtube-handler {\\n  padding-top: 10px;\\n  background: #efefef;\\n  padding-bottom: 4px;\\n}\\n.lesson-details-page .youtube-handler ion-icon {\\n  font-size: 35px;\\n}\\n.lesson-details-page ion-footer ion-row ion-col {\\n  margin-bottom: 7px;\\n}\\n.lesson-details-page .lesson-heading {\\n  color: #aca7a7;\\n}\\n.lesson-details-page #highlight-save-lesson-icon {\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n  padding: 7px 6px 0px 6px;\\n  border-radius: 25px;\\n  background: #ffffff;\\n  cursor: pointer;\\n}\\n.lesson-details-page #highlight-save-lesson-icon.save-loading {\\n  background: #f8f8f8;\\n  padding: 6px;\\n}\\n.lesson-details-page #highlight-save-lesson-icon ion-spinner {\\n  width: 25px;\\n  height: 25px;\\n}\\n.lesson-details-page #highlight-save-lesson-icon ion-icon {\\n  font-size: 25px;\\n}\\n.lesson-details-page .player-wrapper {\\n  background-color: #000;\\n  position: relative;\\n}\\n.lesson-details-page .player-wrapper .player-overlay {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  z-index: 200;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.lesson-details-page .player-wrapper .player-overlay .play-btn {\\n  position: relative;\\n  overflow: hidden;\\n  border-radius: 10px;\\n  width: 95%;\\n  height: 60%;\\n}\\n.lesson-details-page .player-wrapper .react-player {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n}\\n.lesson-details-page .youtube-handler {\\n  padding-top: 10px;\\n  background: #efefef;\\n  padding-bottom: 4px;\\n}\\n.lesson-details-page .youtube-handler ion-icon {\\n  font-size: 35px;\\n}\\n.lesson-details-page .display-block {\\n  display: block;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2xlc3Nvbi1kZXRhaWxzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDRTtFQUNFLGNBQUE7RUFDQSxjQUFBO0VBQ0EsYUFBQTtBQUFKO0FBRUU7RUFDRSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxXQUFBO0VBQ0Esd0JBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtBQUFKO0FBQ0k7RUFDRSxlQUFBO0FBQ047QUFHRTtFQUNFLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtBQURKO0FBRUk7RUFDRSxlQUFBO0FBQU47QUFTTTtFQUNFLGtCQUFBO0FBUFI7QUFtQkU7RUFDRSxjQUFBO0FBakJKO0FBb0JFO0VBQ0Usa0JBQUE7RUFDQSxTQUFBO0VBQ0EsV0FBQTtFQUNBLHdCQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7QUFsQko7QUFtQkk7RUFDRSxtQkFBQTtFQUNBLFlBQUE7QUFqQk47QUFtQkk7RUFDRSxXQUFBO0VBQ0EsWUFBQTtBQWpCTjtBQW1CSTtFQUNFLGVBQUE7QUFqQk47QUFxQkU7RUFDRSxzQkFBQTtFQUNBLGtCQUFBO0FBbkJKO0FBcUJJO0VBQ0Usa0JBQUE7RUFDQSxNQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxTQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0FBbkJOO0FBb0JNO0VBQ0Usa0JBQUE7RUFDQSxnQkFBQTtFQUVBLG1CQUFBO0VBQ0EsVUFBQTtFQUNBLFdBQUE7QUFuQlI7QUFzQkk7RUFDRSxrQkFBQTtFQUNBLE1BQUE7RUFDQSxPQUFBO0FBcEJOO0FBdUJFO0VBQ0UsaUJBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0FBckJKO0FBc0JJO0VBQ0UsZUFBQTtBQXBCTjtBQTJCRTtFQUNFLGNBQUE7QUF6QkoiLCJmaWxlIjoibGVzc29uLWRldGFpbHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmxlc3Nvbi1kZXRhaWxzLXBhZ2Uge1xuICBpb24tc3Bpbm5lciB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgbWFyZ2luOiAwIGF1dG87XG4gICAgaGVpZ2h0OiAyNzVweDtcbiAgfVxuICAjaGlnaGxpZ2h0LXNhdmUtbGVzc29uLWljb24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDEwcHg7XG4gICAgcmlnaHQ6IDEwcHg7XG4gICAgcGFkZGluZzogN3B4IDZweCAwcHggNnB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDI1cHg7XG4gICAgYmFja2dyb3VuZDogI2ZmZmZmZjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgaW9uLWljb24ge1xuICAgICAgZm9udC1zaXplOiAyNXB4O1xuICAgIH1cbiAgfVxuXG4gIC55b3V0dWJlLWhhbmRsZXIge1xuICAgIHBhZGRpbmctdG9wOiAxMHB4O1xuICAgIGJhY2tncm91bmQ6ICNlZmVmZWY7XG4gICAgcGFkZGluZy1ib3R0b206IDRweDtcbiAgICBpb24taWNvbiB7XG4gICAgICBmb250LXNpemU6IDM1cHg7XG4gICAgICAvLyBwYWRkaW5nOiA1cHggNXB4IDVweCA1LjVweDtcbiAgICAgIC8vIGJvcmRlci1yYWRpdXM6IDI1cHg7XG4gICAgICAvLyBiYWNrZ3JvdW5kOiAjZWZlZmVmO1xuICAgICAgLy8gYm9yZGVyOiAycHggc29saWQgIzAwMDtcbiAgICB9XG4gIH1cbiAgaW9uLWZvb3RlciB7XG4gICAgaW9uLXJvdyB7XG4gICAgICBpb24tY29sIHtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogN3B4O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vLy8vL1xuXG4gIC8vIGlvbi1zbGlkZXMge1xuICAvLyAgIC0tYnVsbGV0LWJhY2tncm91bmQ6ICNmNTgzM2Q7XG4gIC8vICAgLS1idWxsZXQtYmFja2dyb3VuZC1hY3RpdmU6ICNlMjJkMmQ7XG4gIC8vICAgb3ZlcmZsb3cteTogc2Nyb2xsO1xuICAvLyB9XG4gIC5sZXNzb24taGVhZGluZyB7XG4gICAgY29sb3I6ICNhY2E3YTc7XG4gIH1cblxuICAjaGlnaGxpZ2h0LXNhdmUtbGVzc29uLWljb24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDEwcHg7XG4gICAgcmlnaHQ6IDEwcHg7XG4gICAgcGFkZGluZzogN3B4IDZweCAwcHggNnB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDI1cHg7XG4gICAgYmFja2dyb3VuZDogI2ZmZmZmZjtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgJi5zYXZlLWxvYWRpbmcge1xuICAgICAgYmFja2dyb3VuZDogI2Y4ZjhmODtcbiAgICAgIHBhZGRpbmc6IDZweDtcbiAgICB9XG4gICAgaW9uLXNwaW5uZXIge1xuICAgICAgd2lkdGg6IDI1cHg7XG4gICAgICBoZWlnaHQ6IDI1cHg7XG4gICAgfVxuICAgIGlvbi1pY29uIHtcbiAgICAgIGZvbnQtc2l6ZTogMjVweDtcbiAgICB9XG4gIH1cblxuICAucGxheWVyLXdyYXBwZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIC8vIHBhZGRpbmctdG9wOiA1Ni4yNSU7IC8qIFBsYXllciByYXRpbzogMTAwIC8gKDEyODAgLyA3MjApICovXG4gICAgLnBsYXllci1vdmVybGF5IHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIGxlZnQ6IDA7XG4gICAgICByaWdodDogMDtcbiAgICAgIGJvdHRvbTogMDtcbiAgICAgIHotaW5kZXg6IDIwMDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAucGxheS1idG4ge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIC8vIGJhY2tncm91bmQtY29sb3I6ICM4MjI7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIHdpZHRoOiA5NSU7XG4gICAgICAgIGhlaWdodDogNjAlO1xuICAgICAgfVxuICAgIH1cbiAgICAucmVhY3QtcGxheWVyIHtcbiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgIHRvcDogMDtcbiAgICAgIGxlZnQ6IDA7XG4gICAgfVxuICB9XG4gIC55b3V0dWJlLWhhbmRsZXIge1xuICAgIHBhZGRpbmctdG9wOiAxMHB4O1xuICAgIGJhY2tncm91bmQ6ICNlZmVmZWY7XG4gICAgcGFkZGluZy1ib3R0b206IDRweDtcbiAgICBpb24taWNvbiB7XG4gICAgICBmb250LXNpemU6IDM1cHg7XG4gICAgICAvLyBwYWRkaW5nOiA1cHggNXB4IDVweCA1LjVweDtcbiAgICAgIC8vIGJvcmRlci1yYWRpdXM6IDI1cHg7XG4gICAgICAvLyBiYWNrZ3JvdW5kOiAjZWZlZmVmO1xuICAgICAgLy8gYm9yZGVyOiAycHggc29saWQgIzAwMDtcbiAgICB9XG4gIH1cbiAgLmRpc3BsYXktYmxvY2sge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICB9XG59XG4iXX0= */\";","import {Injectable} from '@angular/core'\nimport {Observable} from 'rxjs'\nimport {ApiService} from './api.service'\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CommentsService {\n  constructor(public apiService: ApiService) {}\n\n  getCommentsBySubLessonId(page, data): Observable<any> {\n    return this.apiService.post('/comments/list/' + page, data)\n  }\n\n  saveCommentBySubLessonId(data): Observable<any> {\n    return this.apiService.post('/comments/user/save/', data)\n  }\n\n  likeComment(data): Observable<any> {\n    return this.apiService.post('/comments/user/like/', data)\n  }\n\n  disLikeComment(data): Observable<any> {\n    return this.apiService.post('/comments/user/dislike/', data)\n  }\n\n  getCommentRepliesBySubLessonId(page, data): Observable<any> {\n    return this.apiService.post('/comments/reply-list/' + page, data)\n  }\n\n  saveCommentReplyBySubLessonId(data): Observable<any> {\n    return this.apiService.post('/comments/user/reply/', data)\n  }\n\n  editComment(data): Observable<any> {\n    return this.apiService.post('/comments/edit/', data)\n  }\n\n  deleteComment(data): Observable<any> {\n    return this.apiService.post('/comments/delete/', data)\n  }\n\n  editReply(data): Observable<any> {\n    return this.apiService.post('/comments/reply-edit/', data)\n  }\n\n  deleteReply(data): Observable<any> {\n    return this.apiService.post('/comments/reply-delete/', data)\n  }\n}\n"]}