{"version":3,"sources":["./src/app/dashboard/user-profile/setting/account/subscription-plans/stripe-manage/add-card/add-card.component.html","./src/app/dashboard/user-profile/setting/account/subscription-plans/stripe-manage/stripe-manage.module.ts","./src/app/dashboard/user-profile/setting/account/subscription-plans/stripe-manage/stripe-manage.page.html","./src/app/dashboard/user-profile/setting/account/subscription-plans/stripe-manage/stripe-manage.page.ts","./src/app/dashboard/user-profile/setting/account/subscription-plans/stripe-manage/stripe-manage.page.scss","./src/app/dashboard/user-profile/setting/account/subscription-plans/stripe-manage/add-card/add-card.component.scss","./src/app/dashboard/user-profile/setting/account/subscription-plans/stripe-manage/add-card/add-card.component.ts"],"names":[],"mappings":"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","file":"dashboard-user-profile-setting-account-subscription-plans-stripe-manage-stripe-manage-module-es2015.js","sourcesContent":["export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-title>\\n      Add New Card\\n    </ion-title>\\n    <ion-buttons slot=\\\"end\\\" mode=\\\"md\\\">\\n      <ion-button mode=\\\"md\\\" (click)=\\\"dismiss()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" mode=\\\"ios\\\" name=\\\"close\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <form action=\\\"/\\\" method=\\\"post\\\" id=\\\"payment-form\\\">\\n    <ion-grid>\\n      <ion-row class=\\\"ion-margin-top ion-margin-bottom ion-align-items-center ion-justify-content-center\\\">\\n        <ion-col sizeXs=\\\"12\\\" sizeSm=\\\"12\\\" sizeMd=\\\"10\\\" sizeLg=\\\"10\\\" sizeXl=\\\"10\\\" class=\\\"ion-align-self-center\\\">\\n          <div class=\\\"form-row\\\">\\n            <div id=\\\"card-element\\\">\\n              <!-- a Stripe Element will be inserted here. -->\\n            </div>\\n            <!-- Used to display Element errors -->\\n            <div class=\\\"c-red\\\" id=\\\"card-errors\\\" role=\\\"alert\\\"></div>\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n        <ion-col sizeXs=\\\"12\\\" sizeSm=\\\"12\\\" sizeMd=\\\"8\\\" sizeLg=\\\"6\\\" sizeXl=\\\"6\\\" class=\\\"ion-align-self-center\\\">\\n          <ion-button type=\\\"submit\\\" mode=\\\"ios\\\" color=\\\"danger\\\" fill=\\\"outline\\\" shape=\\\"round\\\" expand=\\\"block\\\"\\n            >Add Card\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n</ion-content>\\n\";","// import {FilterPaymentCardsByDatePipe} from '../../../../../../pipes/filter-payment-cards-by-date.pipe'\nimport {AddCardComponent} from './add-card/add-card.component'\nimport {SubscriptionService} from '../../../../../../services/subscription.service'\nimport {OnBoardingService} from '../../../../../../services/on-boarding.service'\nimport {NgModule} from '@angular/core'\nimport {CommonModule} from '@angular/common'\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms'\nimport {Routes, RouterModule} from '@angular/router'\n\nimport {IonicModule} from '@ionic/angular'\n\nimport {StripeManagePage} from './stripe-manage.page'\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StripeManagePage,\n  },\n]\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n  ],\n  declarations: [\n    StripeManagePage,\n    AddCardComponent,\n    // FilterPaymentCardsByDatePipe\n  ],\n  entryComponents: [AddCardComponent],\n  providers: [OnBoardingService, SubscriptionService],\n})\nexport class StripeManagePageModule {}\n","export default \"<ion-header mode=\\\"ios\\\">\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-buttons slot=\\\"start\\\" mode=\\\"md\\\">\\n      <ion-button mode=\\\"md\\\" (click)=\\\"back()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"chevron-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid class=\\\"ion-no-padding\\\">\\n    <ion-row class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n      <ion-col\\n        sizeXs=\\\"12\\\"\\n        sizeSm=\\\"12\\\"\\n        sizeMd=\\\"6\\\"\\n        sizeLg=\\\"4\\\"\\n        sizeXl=\\\"4\\\"\\n        class=\\\"ion-no-padding ion-padding ion-align-self-center\\\"\\n      >\\n        <h1 class=\\\"ion-no-margin\\\">Payment options</h1>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n      <ion-col sizeXs=\\\"12\\\" sizeSm=\\\"12\\\" sizeMd=\\\"6\\\" sizeLg=\\\"4\\\" sizeXl=\\\"4\\\" class=\\\"ion-no-padding ion-align-self-center\\\">\\n        <ion-list mode=\\\"md\\\" class=\\\"ion-no-padding\\\">\\n          <ion-list-header mode=\\\"md\\\">\\n            <ion-label>Credit / Debit Cards</ion-label>\\n          </ion-list-header>\\n          <ion-item mode=\\\"md\\\" *ngFor=\\\"let paymentCard of paymentCards\\\" (click)=\\\"onSetDefaultCard(paymentCard)\\\">\\n            <ion-label\\n              >{{ paymentCard.card.brand | uppercase }} <span>xxxx-xxxx-xxxx-</span>{{ paymentCard.card.last4 }}\\n            </ion-label>\\n            <ion-label>\\n              {{ paymentCard.card.exp_month | number: '2.0' }}/{{ paymentCard.card.exp_year % 100 | number: '2.0' }}\\n            </ion-label>\\n            <ion-icon\\n              *ngIf=\\\"paymentCard.default\\\"\\n              mode=\\\"ios\\\"\\n              color=\\\"success\\\"\\n              name=\\\"checkmark-circle\\\"\\n              size=\\\"large\\\"\\n              slot=\\\"end\\\"\\n            ></ion-icon>\\n          </ion-item>\\n        </ion-list>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n      <ion-col sizeXs=\\\"12\\\" sizeSm=\\\"12\\\" sizeMd=\\\"6\\\" sizeLg=\\\"4\\\" sizeXl=\\\"4\\\" class=\\\"ion-padding-start ion-align-self-center\\\">\\n        <p (click)=\\\"onAddCard()\\\" class=\\\"pointer\\\">\\n          <ion-icon id=\\\"add-card-icon\\\" name=\\\"add-circle-outline\\\"></ion-icon> ADD NEW CARD\\n        </p>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n<ion-footer>\\n  <ion-row class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n    <ion-col sizeXs=\\\"12\\\" sizeSm=\\\"12\\\" sizeMd=\\\"6\\\" sizeLg=\\\"4\\\" sizeXl=\\\"4\\\" class=\\\"ion-align-self-center\\\">\\n      <!-- <ion-button\\n        mode=\\\"ios\\\"\\n        [disabled]=\\\"customerDetails === undefined\\\"\\n        (click)=\\\"onProcessedToPayUsingStripe()\\\"\\n        color=\\\"danger\\\"\\n        shape=\\\"round\\\"\\n        expand=\\\"block\\\"\\n        >Process To Pay\\n      </ion-button> -->\\n    </ion-col>\\n  </ion-row>\\n</ion-footer>\\n\";","import {AddCardComponent} from './add-card/add-card.component'\nimport {Router} from '@angular/router'\nimport {NavController, ModalController, LoadingController} from '@ionic/angular'\nimport {SubscriptionService} from './../../../../../../services/subscription.service'\nimport {OnBoardingService} from './../../../../../../services/on-boarding.service'\nimport {SharedService} from './../../../../../../services/shared.service'\nimport {Component, OnInit, isDevMode} from '@angular/core'\nimport {environment} from '../../../../../../../environments/environment'\ndeclare var Stripe\n\n@Component({\n  selector: 'app-stripe-manage',\n  templateUrl: './stripe-manage.page.html',\n  styleUrls: ['./stripe-manage.page.scss'],\n})\nexport class StripeManagePage implements OnInit {\n  // Add Stripe Public Key\n  stripe = Stripe(environment.stripePublicKey)\n  card: any\n  paymentCards = []\n  customerDetails: any = undefined\n  isDevelopmentMode = true\n  stripeCustomerId: string\n\n  constructor(\n    public sharedService: SharedService,\n    private onBoardingService: OnBoardingService,\n    public navController: NavController,\n    private router: Router,\n    public modalController: ModalController,\n    public loadingController: LoadingController,\n    private subscriptionService: SubscriptionService,\n  ) {}\n\n  ngOnInit() {\n    if (isDevMode()) {\n      this.isDevelopmentMode = true\n    } else {\n      this.isDevelopmentMode = false\n    }\n    console.log('this.isDevelopmentMode', this.isDevelopmentMode)\n\n    this.getCustomer()\n  }\n\n  async getCustomer() {\n    try {\n      this.sharedService.presentLoader('Please wait...')\n\n      const profileRes = await this.onBoardingService.getUserProfile().toPromise()\n\n      if (profileRes.data) {\n        const profile = profileRes.data\n\n        const stripeCustomerId = this.isDevelopmentMode\n          ? profile.stripeSandBoxCustomerId\n          : profile.stripeLiveCustomerId\n\n        this.stripeCustomerId = stripeCustomerId\n\n        this.getAllPaymentMethods()\n      }\n    } catch (error) {\n      console.log(error)\n    } finally {\n      this.sharedService.dismissLoader()\n    }\n  }\n\n  async getAllPaymentMethods() {\n    try {\n      const stripeCustomerId = this.stripeCustomerId\n\n      const data = {\n        type: 'card',\n        customerId: stripeCustomerId,\n      }\n\n      const res = await this.subscriptionService\n        .getCustomerAllPaymentMethods(data)\n        .toPromise()\n\n      if (res.data.data.length) {\n        this.paymentCards = res.data.data\n\n        const customerDetails = await this.subscriptionService\n          .getCustomerDetails(stripeCustomerId)\n          .toPromise()\n\n        this.customerDetails = customerDetails.data\n\n        this.paymentCards.map((card: any) => {\n          card.default = card.id === this.customerDetails.default_source\n        })\n        console.log(this.paymentCards)\n      }\n    } catch (error) {\n      console.log(error)\n    } finally {\n      this.sharedService.dismissLoader()\n    }\n  }\n\n  async onAddCard() {\n    const modal = await this.modalController.create({\n      component: AddCardComponent,\n      componentProps: {stripeCustomerId: this.stripeCustomerId},\n      mode: 'md',\n    })\n    await modal.present()\n    await modal\n      .onDidDismiss()\n      .then(() => {\n        this.getAllPaymentMethods()\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n  }\n\n  back() {\n    this.navController.setDirection('back')\n    this.router.navigate(['/subscription'])\n  }\n\n  onSetDefaultCard(paymentCard) {\n    this.customerDetails.default_source = paymentCard.id\n    this.paymentCards.forEach((card) => {\n      card.default = card.id === this.customerDetails.default_source\n    })\n  }\n}\n","export default \"ion-list-header {\\n  --background: lightgray;\\n}\\n\\nion-item ion-label span {\\n  font-size: 20px;\\n}\\n\\n#add-card-icon {\\n  font-size: 25px;\\n  margin-right: 5px;\\n  display: inline-flex;\\n  vertical-align: middle;\\n}\\n\\n.warning {\\n  --background: #bad9b5;\\n  font-weight: 600;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3N0cmlwZS1tYW5hZ2UucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUJBQUE7QUFDRjs7QUFHSTtFQUNFLGVBQUE7QUFBTjs7QUFJQTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtFQUNBLG9CQUFBO0VBQ0Esc0JBQUE7QUFERjs7QUFHQTtFQUNFLHFCQUFBO0VBQ0EsZ0JBQUE7QUFBRiIsImZpbGUiOiJzdHJpcGUtbWFuYWdlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1saXN0LWhlYWRlciB7XG4gIC0tYmFja2dyb3VuZDogbGlnaHRncmF5O1xufVxuaW9uLWl0ZW0ge1xuICBpb24tbGFiZWwge1xuICAgIHNwYW4ge1xuICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgIH1cbiAgfVxufVxuI2FkZC1jYXJkLWljb24ge1xuICBmb250LXNpemU6IDI1cHg7XG4gIG1hcmdpbi1yaWdodDogNXB4O1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cbi53YXJuaW5nIHtcbiAgLS1iYWNrZ3JvdW5kOiAjYmFkOWI1O1xuICBmb250LXdlaWdodDogNjAwO1xufVxuIl19 */\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhZGQtY2FyZC5jb21wb25lbnQuc2NzcyJ9 */\";","import {ModalController, NavParams} from '@ionic/angular'\nimport {SubscriptionService} from './../../../../../../../services/subscription.service'\nimport {SharedService} from './../../../../../../../services/shared.service'\nimport {Component, OnInit} from '@angular/core'\nimport {environment} from '../../../../../../../../environments/environment'\ndeclare var Stripe\n@Component({\n  selector: 'app-add-card',\n  templateUrl: './add-card.component.html',\n  styleUrls: ['./add-card.component.scss'],\n})\nexport class AddCardComponent implements OnInit {\n  stripe = Stripe(environment.stripePublicKey)\n  card: any\n  stripeCustomerId\n\n  constructor(\n    private sharedService: SharedService,\n    private subscriptionService: SubscriptionService,\n    public modalController: ModalController,\n    private navParams: NavParams,\n  ) {\n    this.stripeCustomerId = this.navParams.get('stripeCustomerId')\n  }\n\n  ngOnInit() {\n    this.setupStripe()\n  }\n\n  setupStripe() {\n    const elements = this.stripe.elements()\n    const style = {\n      base: {\n        color: '#32325d',\n        lineHeight: '24px',\n        fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n        fontSmoothing: 'antialiased',\n        fontSize: '16px',\n        '::placeholder': {\n          color: '#aab7c4',\n        },\n      },\n      invalid: {\n        color: '#fa755a',\n        iconColor: '#fa755a',\n      },\n    }\n\n    this.card = elements.create('card', {style, hidePostalCode: true})\n    // console.log( this.card );\n    this.card.mount('#card-element')\n\n    this.card.addEventListener('change', (event) => {\n      const displayError = document.getElementById('card-errors')\n      if (event.error) {\n        displayError.textContent = event.error.message\n      } else {\n        displayError.textContent = ''\n      }\n    })\n\n    const form = document.getElementById('payment-form')\n    form.addEventListener('submit', (event) => {\n      event.preventDefault()\n      // console.log( event );\n      this.sharedService.presentLoader('Please wait...')\n      // console.log( this.card );\n      this.stripe.createSource(this.card).then((result) => {\n        if (result.error) {\n          const errorElement = document.getElementById('card-errors')\n          errorElement.textContent = result.error.message\n          this.sharedService.dismissLoader()\n        } else {\n          this.attachSourceToCustomer(result.source.id)\n        }\n      })\n    })\n  }\n\n  async attachSourceToCustomer(sourceId) {\n    try {\n      const stripeCustomerId = this.stripeCustomerId\n      if (stripeCustomerId === undefined) {\n        return\n      }\n\n      const res = await this.subscriptionService\n        .attachSourceToCustomer({customerId: stripeCustomerId, token: sourceId})\n        .toPromise()\n      this.sharedService.dismissLoader()\n      this.dismiss()\n    } catch (error) {\n      console.log(error)\n      this.sharedService.dismissLoader()\n      this.sharedService.presentToast(error.err?.raw?.message)\n    } finally {\n    }\n  }\n\n  dismiss() {\n    this.modalController.dismiss()\n  }\n}\n"],"sourceRoot":"webpack:///"}