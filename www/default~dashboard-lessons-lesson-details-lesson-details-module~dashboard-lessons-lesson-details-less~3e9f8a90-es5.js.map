{"version":3,"sources":["webpack:///src/app/dashboard/lessons/lesson-details/comments/Comments.tsx","webpack:///src/app/dashboard/lessons/lesson-details/comments/Comments.scss","webpack:///node_modules/clsx/dist/clsx.m.js"],"names":["window","formatDate","Keyboard","Reply","comment","onPresentCommentActionsPopover","lines","className","slot","src","userProfile","userName","Date","createdAt","reply","isOwner","onClick","e","icon","OnlyComment","Comment","isComment","isReply","onPresentCommentRepliesModal","onDisLikeComment","onLikeComment","handlePopover","persist","isCurrentUserlike","totalLike","isCurrentUserDislike","totalDislike","totalReply","presentToast","message","toast","document","createElement","duration","body","appendChild","present","PER_PAGE","CommentReply","lessonId","subLessonId","platform","onDismiss","profile","setReply","page","setPage","replies","setReplies","noMore","setNoMore","event","setEvent","replyToEdit","setReplyToEdit","commentId","_id","replyToDelete","setReplyToDelete","showPopover","setShowPopover","post","response","loading","getReplies","data","ok","total","l","postReply","replyLoading","postDelete","deleteLoading","reload","target","complete","saveReply","undefined","trim","res","console","log","is","hide","deleteReply","replyId","showLoading","mode","color","isOpen","AddComment","placeholder","onCommentChange","detail","value","onSubmit","map","i","key","threshold","disabled","onIonInfinite","p","style","textAlign","name","onDidDismiss","header","buttons","text","role","cssClass","handler","blah","onWillDismiss","EditReply","newReply","setNewReply","postEdit","editLoading","editComment","EditComment","newComment","setNewComment","Comments","selectedComment","setSelectedComment","commentToEdit","setCommentToEdit","commentToDelete","setCommentToDelete","setComment","ts","setTs","setResult","postSave","saveLoading","postLike","likeLoading","postDislike","dislikeLoading","then","length","newData","err","likeComment","dislikeComment","saveComment","sizeXs","sizeSm","cnt","setCnt","showKeyBoard","show","size","preventDefault","profilePic","type","id","autofocus","onIonChange","onIonFocus","toVal","mix","k","y","str","Array","isArray","tmp","x","arguments"],"mappings":"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","file":"default~dashboard-lessons-lesson-details-lesson-details-module~dashboard-lessons-lesson-details-less~3e9f8a90-es5.js","sourcesContent":["// TODO: merge into  /src/reactapp/components/Comments.tsx\nimport * as React from 'react'\nimport {Plugins} from '@capacitor/core'\nimport {\n  IonAvatar,\n  IonCol,\n  IonIcon,\n  IonItem,\n  IonRow,\n  IonInput,\n  IonButton,\n  IonImg,\n  IonText,\n  IonLabel,\n  IonInfiniteScroll,\n  IonInfiniteScrollContent,\n  IonSpinner,\n  IonLoading,\n  IonModal,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonButtons,\n  IonContent,\n  IonGrid,\n  IonPopover,\n  IonList,\n  IonAlert,\n} from '@ionic/react'\nimport {send, ellipsisVertical, close} from 'ionicons/icons'\nimport clsx from 'clsx'\nimport {environment} from 'src/environments/environment'\nimport useFetch, {CachePolicies, Provider} from 'use-http'\nimport {format} from 'date-fns/fp'\nwindow['React'] = React\n\nconst formatDate = format('MMM d, y')\n\nconst {Keyboard} = Plugins\n\nfunction Reply({comment, onPresentCommentActionsPopover}) {\n  return (\n    <IonItem lines=\"none\" className=\"comment ion-no-padding pointer\">\n      <IonAvatar slot=\"start\" className=\"reply-avatar\">\n        <img src={comment?.userProfile || '../../../assets/images/defaultProfile.svg'} />\n      </IonAvatar>\n      <IonLabel>\n        <IonText className=\"comment-user\">\n          {comment.userName} . {formatDate(new Date(comment.createdAt))}\n        </IonText>\n        {\n          <p className=\"comment-description\">\n            {comment.reply}\n            {comment.isOwner && (\n              <span\n                className=\"ion-float-right\"\n                onClick={(e) => onPresentCommentActionsPopover(e, comment)}\n              >\n                <IonIcon icon={ellipsisVertical}></IonIcon>\n              </span>\n            )}\n          </p>\n        }\n      </IonLabel>\n    </IonItem>\n  )\n}\n\nfunction OnlyComment({comment}) {\n  return (\n    <IonItem lines=\"none\" className=\"comment ion-no-padding pointer\">\n      <IonAvatar slot=\"start\">\n        <img src={comment?.userProfile || '../../../assets/images/defaultProfile.svg'} />\n      </IonAvatar>\n      <IonLabel>\n        <IonText className=\"comment-user\">\n          {comment.userName} . {formatDate(new Date(comment.createdAt))}\n        </IonText>\n        {\n          <p className=\"comment-description\">\n            <span>{comment.comment}</span>\n          </p>\n        }\n      </IonLabel>\n    </IonItem>\n  )\n}\nfunction Comment({\n  comment,\n  isComment,\n  isReply,\n  onPresentCommentRepliesModal,\n  onDisLikeComment,\n  onPresentCommentActionsPopover,\n  onLikeComment,\n}) {\n  function handlePopover(e, comment) {\n    e.persist()\n    // setShowPopover(e)\n    onPresentCommentActionsPopover(e, comment)\n  }\n  return (\n    <IonItem lines=\"none\" className=\"comment ion-no-padding pointer\">\n      <IonAvatar slot=\"start\" className={clsx('reply-avatar' && !isComment)}>\n        <img src={comment?.userProfile || '../../../assets/images/defaultProfile.svg'} />\n      </IonAvatar>\n      <IonLabel>\n        <IonText className=\"comment-user\">\n          {comment.userName} . {formatDate(new Date(comment.createdAt))}\n        </IonText>\n        {isComment ? (\n          <p className=\"comment-description\">\n            <span onClick={() => onPresentCommentRepliesModal(comment)}>\n              {comment.comment}\n            </span>\n            {comment.isOwner && !isComment && isReply && (\n              <span\n                className=\"ion-float-right\"\n                onClick={(e) => handlePopover(e, comment)}\n              >\n                <IonIcon icon={ellipsisVertical}></IonIcon>\n              </span>\n            )}\n          </p>\n        ) : (\n          <p className=\"comment-description\">\n            {comment.reply}\n            {comment.isOwner && !isComment && isReply && (\n              <span\n                className=\"ion-float-right\"\n                onClick={(e) => handlePopover(e, comment)}\n              >\n                <IonIcon icon={ellipsisVertical}></IonIcon>\n              </span>\n            )}\n          </p>\n        )}\n        {isComment && isReply && (\n          <p>\n            <span className=\"comment-like\" onClick={(e) => onLikeComment(comment)}>\n              <IonImg\n                src={\n                  comment.isCurrentUserlike\n                    ? '/assets/images/thumb-up-filled.png'\n                    : '/assets/images/thumb-up.png'\n                }\n              ></IonImg>\n              <IonText>{comment.totalLike}</IonText>\n            </span>\n            <span className=\"comment-disLike\" onClick={(e) => onDisLikeComment(comment)}>\n              <IonImg\n                src={\n                  comment.isCurrentUserDislike\n                    ? '/assets/images/thumb-down-filled.png'\n                    : '/assets/images/thumb-down.png'\n                }\n              ></IonImg>\n              <IonText>{comment.totalDislike}</IonText>\n            </span>\n            <span onClick={() => onPresentCommentRepliesModal(comment)}>\n              <IonImg src=\"/assets/images/black-bubble.png\"></IonImg>\n              <IonText>{comment.totalReply}</IonText>\n            </span>\n            {comment.isOwner && (\n              <span\n                className=\"ion-float-right pointer\"\n                onClick={(e) => handlePopover(e, comment)}\n              >\n                <IonIcon icon={ellipsisVertical}></IonIcon>\n              </span>\n            )}\n          </p>\n        )}\n        {comment.totalReply > 0 && isComment && isReply && (\n          <p\n            className=\"view-replies c-orange\"\n            onClick={() => onPresentCommentRepliesModal(comment)}\n          >\n            VIEW {comment.totalReply} REPLIES\n          </p>\n        )}\n      </IonLabel>\n    </IonItem>\n  )\n}\n\nasync function presentToast(message) {\n  const toast = document.createElement('ion-toast')\n  toast.message = message\n  toast.duration = 500\n\n  document.body.appendChild(toast)\n  return toast.present()\n}\n\nconst PER_PAGE = 10\n\nfunction CommentReply({comment, lessonId, subLessonId, platform, onDismiss, profile}) {\n  const [reply, setReply] = React.useState('')\n  const [page, setPage] = React.useState(1)\n  const [replies, setReplies] = React.useState([])\n  const [noMore, setNoMore] = React.useState(false)\n  const [event, setEvent] = React.useState(null)\n  const [replyToEdit, setReplyToEdit] = React.useState<any>()\n\n  const commentId = comment._id\n  const [replyToDelete, setReplyToDelete] = React.useState<any>()\n  const [showPopover, setShowPopover] = React.useState<any>()\n  const {post, response, loading} = useFetch(`/comments/reply-list`)\n\n  async function getReplies() {\n    const data = await post(`/${page}`, {commentId})\n    if (response.ok) {\n      if (data.total <= page) {\n        setNoMore(true)\n      }\n      if (page === 1) {\n        setReplies([...data.data])\n      } else {\n        setReplies((l) => [...l, ...data.data])\n      }\n    }\n  }\n\n  React.useEffect(() => {\n    getReplies()\n  }, [page])\n\n  const {post: postReply, loading: replyLoading} = useFetch(`/comments/user/reply`)\n  const {post: postDelete, loading: deleteLoading} = useFetch(`/comments/reply-delete`)\n\n  async function reload() {\n    setPage(1)\n    setNoMore(false)\n    getReplies()\n  }\n\n  React.useEffect(() => {\n    if (event) {\n      event.target.complete()\n      setEvent(null)\n    }\n  }, [event, setEvent])\n\n  // console.log({data, loading})\n\n  async function saveReply() {\n    if (reply === undefined || reply.trim() === '') {\n      return\n    }\n\n    // this.sharedService.presentLoader('Please wait...')\n\n    try {\n      const res = await postReply({\n        lessonId: lessonId,\n        subLessonId: subLessonId,\n        commentId: commentId,\n        reply: reply.trim(),\n      })\n      console.log(res)\n      if (res.message) {\n        presentToast(res.message)\n      }\n      if (platform.is('capacitor')) {\n        Keyboard.hide()\n      }\n      await reload()\n      setReply('')\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  async function deleteReply() {\n    if (replyToDelete === undefined) {\n      return\n    }\n\n    // this.sharedService.presentLoader('Please wait...')\n\n    try {\n      const res = await postDelete({replyId: replyToDelete?._id})\n      console.log(res)\n      if (res.message) {\n        presentToast(res.message)\n      }\n      await reload()\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  const showLoading = replyLoading\n  // const {loading, error, data, get, cache} = useFetch('/payments/get-stripe-user', {}, [])\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Replies</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton\n              mode=\"md\"\n              //  (click)=\"dismiss()\"\n              onClick={onDismiss}\n            >\n              <IonIcon color=\"dark\" slot=\"icon-only\" icon={close}></IonIcon>\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <IonLoading\n          // cssClass=\"my-custom-class\"\n          isOpen={showLoading}\n          // onDidDismiss={() => setShowLoading(false)}\n          message={'Please wait...'}\n          // duration={5000}\n        />\n        <IonGrid>\n          <IonRow>\n            <IonCol>\n              <OnlyComment comment={comment} />\n            </IonCol>\n          </IonRow>\n          <AddComment\n            comment={reply}\n            placeholder=\"Add a reply\"\n            onCommentChange={(e) => setReply(e.detail.value)}\n            profile={profile}\n            platform={platform}\n            onSubmit={saveReply}\n          />\n          <IonRow className=\"ml-16\">\n            <IonCol>\n              {replies.map((comment, i) => (\n                <Reply\n                  key={i}\n                  comment={comment}\n                  onPresentCommentActionsPopover={(e, comment) => {\n                    e.persist()\n                    setShowPopover({event: e, comment})\n                  }}\n                />\n              ))}\n              {/* <app-comment\n          [comments]=\"replies\"\n          [isComment]=\"false\"\n          [isReply]=\"true\"\n          (likeComment)=\"likeComment($event)\"\n          (disLikeComment)=\"disLikeComment($event)\"\n          (presentCommentActionsPopover)=\"presentCommentActionsPopover($event)\"\n        ></app-comment> */}\n            </IonCol>\n          </IonRow>\n        </IonGrid>\n        <IonInfiniteScroll\n          threshold=\"100px\"\n          disabled={noMore}\n          onIonInfinite={(e: any) => {\n            setPage((p) => p + 1)\n            setEvent(e)\n          }}\n        >\n          <IonInfiniteScrollContent>\n            <div style={{textAlign: 'center'}}>\n              <IonSpinner name=\"crescent\" />\n            </div>\n          </IonInfiniteScrollContent>\n        </IonInfiniteScroll>\n      </IonContent>\n      <IonPopover\n        isOpen={!!showPopover}\n        event={showPopover?.event}\n        mode=\"md\"\n        onDidDismiss={() => setShowPopover(null)}\n      >\n        <IonList lines=\"none\">\n          <IonItem\n            onClick={() => {\n              setShowPopover(null)\n              setReplyToEdit(showPopover?.comment)\n            }}\n          >\n            <IonLabel>Edit</IonLabel>\n          </IonItem>\n          <IonItem\n            onClick={() => {\n              setShowPopover(null)\n              setReplyToDelete(showPopover?.comment)\n            }}\n          >\n            <IonLabel>Delete</IonLabel>\n          </IonItem>\n        </IonList>\n      </IonPopover>\n      <IonAlert\n        isOpen={!!replyToDelete}\n        onDidDismiss={() => setReplyToDelete(null)}\n        header={'Delete reply'}\n        message={'Delete your reply permanently?'}\n        buttons={[\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: (blah) => {},\n          },\n          {\n            text: 'Delete',\n            handler: deleteReply,\n          },\n        ]}\n      />\n      <IonModal\n        mode=\"ios\"\n        isOpen={!!replyToEdit}\n        cssClass=\"comment-replies-modal\"\n        onWillDismiss={() => setReplyToEdit(undefined)}\n      >\n        {replyToEdit && (\n          <EditReply\n            profile={profile}\n            platform={platform}\n            reply={replyToEdit}\n            onDismiss={() => {\n              setReplyToEdit(undefined)\n              reload()\n            }}\n          />\n        )}\n      </IonModal>\n    </>\n  )\n}\nfunction EditReply({reply, platform, onDismiss, profile}) {\n  const [newReply, setNewReply] = React.useState(reply.reply)\n  const [event, setEvent] = React.useState(null)\n\n  const {post: postEdit, loading: editLoading} = useFetch(`/comments/reply-edit`)\n\n  React.useEffect(() => {\n    if (event) {\n      event.target.complete()\n      setEvent(null)\n    }\n  }, [event, setEvent])\n\n  async function editComment() {\n    if (newReply === undefined || newReply.trim() === '') {\n      return\n    }\n\n    try {\n      const res = await postEdit({\n        replyId: reply._id,\n        reply: newReply.trim(),\n      })\n      console.log(res)\n      if (res.message) {\n        presentToast(res.message)\n      }\n      if (platform.is('capacitor')) {\n        Keyboard.hide()\n      }\n      setNewReply('')\n      onDismiss()\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const showLoading = editLoading\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Edit Reply</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton mode=\"md\" onClick={onDismiss}>\n              <IonIcon color=\"dark\" slot=\"icon-only\" icon={close}></IonIcon>\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <IonLoading isOpen={showLoading} message={'Please wait...'} />\n        <IonGrid>\n          <AddComment\n            comment={newReply}\n            placeholder=\"Edit a reply\"\n            onCommentChange={(e) => setNewReply(e.detail.value)}\n            profile={profile}\n            platform={platform}\n            onSubmit={editComment}\n          />\n        </IonGrid>\n      </IonContent>\n    </>\n  )\n}\nfunction EditComment({comment, platform, onDismiss, profile}) {\n  const [newComment, setNewComment] = React.useState(comment.comment)\n  const [event, setEvent] = React.useState(null)\n\n  const {post: postEdit, loading: editLoading} = useFetch(`/comments/edit`)\n\n  React.useEffect(() => {\n    if (event) {\n      event.target.complete()\n      setEvent(null)\n    }\n  }, [event, setEvent])\n\n  async function editComment() {\n    if (newComment === undefined || newComment.trim() === '') {\n      return\n    }\n\n    try {\n      const res = await postEdit({\n        commentId: comment._id,\n        comment: newComment.trim(),\n      })\n      console.log(res)\n      if (res.message) {\n        presentToast(res.message)\n      }\n      if (platform.is('capacitor')) {\n        Keyboard.hide()\n      }\n      setNewComment('')\n      onDismiss()\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const showLoading = editLoading\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Edit Comment</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton mode=\"md\" onClick={onDismiss}>\n              <IonIcon color=\"dark\" slot=\"icon-only\" icon={close}></IonIcon>\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n        <IonLoading isOpen={showLoading} message={'Please wait...'} />\n        <IonGrid>\n          <AddComment\n            comment={newComment}\n            placeholder=\"Edit a comment\"\n            onCommentChange={(e) => setNewComment(e.detail.value)}\n            profile={profile}\n            platform={platform}\n            onSubmit={editComment}\n          />\n        </IonGrid>\n      </IonContent>\n    </>\n  )\n}\n\nexport function Comments({lessonId, subLessonId, profile, platform}) {\n  const [selectedComment, setSelectedComment] = React.useState()\n  const [commentToEdit, setCommentToEdit] = React.useState<any>()\n  const [commentToDelete, setCommentToDelete] = React.useState<any>()\n  const [showPopover, setShowPopover] = React.useState<any>()\n  const [comment, setComment] = React.useState('')\n  const [page, setPage] = React.useState(1)\n  const [noMore, setNoMore] = React.useState(false)\n  const [event, setEvent] = React.useState(null)\n  const [ts, setTs] = React.useState(0)\n  const [{data = [], loading}, setResult] = React.useState({data: [], loading: true})\n\n  const {post: postSave, loading: saveLoading} = useFetch(`/comments/user/save`)\n  const {post: postLike, loading: likeLoading} = useFetch(`/comments/user/like`)\n  const {post: postDislike, loading: dislikeLoading} = useFetch(`/comments/user/dislike`)\n  const {post: postDelete, loading: deleteLoading} = useFetch(`/comments/delete`)\n\n  const {post} = useFetch(`/comments/list`)\n  React.useEffect(() => {\n    console.log('reload effect')\n    post(`/${page}`, {subLessonId})\n      .then((res) => {\n        if (res.total <= page || res.data.length === 0) {\n          setNoMore(true)\n        }\n        if (page === 1) {\n          return setResult({data: res.data, loading: false})\n        }\n        const newData = [...data, ...res.data]\n        return setResult({data: newData, loading: false})\n      })\n      .catch((err) => {\n        console.log({err})\n      })\n  }, [page, subLessonId, setNoMore, ts])\n\n  React.useEffect(() => {\n    if (event) {\n      event.target.complete()\n      setEvent(null)\n    }\n  }, [event, setEvent])\n\n  function reload() {\n    setNoMore(false)\n    setPage(1)\n    setTs(+new Date())\n    console.log('reload')\n  }\n\n  async function likeComment(comment) {\n    try {\n      const res = await postLike({\n        lessonId: lessonId,\n        subLessonId: subLessonId,\n        commentId: comment._id,\n      })\n      if (res.message) {\n        presentToast(res.message)\n      }\n      reload()\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  async function dislikeComment(comment) {\n    try {\n      const res = await postDislike({\n        lessonId: lessonId,\n        subLessonId: subLessonId,\n        commentId: comment._id,\n      })\n      if (res.message) {\n        presentToast(res.message)\n      }\n      reload()\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  async function saveComment() {\n    if (comment === undefined || comment.trim() === '') {\n      return\n    }\n\n    // this.sharedService.presentLoader('Please wait...')\n\n    try {\n      const res = await postSave({\n        lessonId: lessonId,\n        subLessonId: subLessonId,\n        comment: comment.trim(),\n      })\n      console.log(res)\n      if (res.message) {\n        presentToast(res.message)\n      }\n      if (platform.is('capacitor')) {\n        Keyboard.hide()\n      }\n      reload()\n      setComment('')\n    } catch (error) {\n      console.log(error)\n    }\n  }\n\n  const showLoading = likeLoading || dislikeLoading || saveLoading || deleteLoading\n  return (\n    <div className=\"comments-component\">\n      <IonLoading\n        // cssClass=\"my-custom-class\"\n        isOpen={showLoading}\n        // onDidDismiss={() => setShowLoading(false)}\n        message={'Please wait...'}\n        // duration={5000}\n      />\n      <AddComment\n        comment={comment}\n        onCommentChange={(e) => setComment(e.detail.value)}\n        profile={profile}\n        platform={platform}\n        onSubmit={saveComment}\n      />\n      <IonRow className=\"ion-align-items-center ion-justify-content-center\">\n        <IonCol sizeXs=\"12\" sizeSm=\"12\" className=\"ion-align-self-center\">\n          {data.map((comment, i) => (\n            <Comment\n              key={i}\n              isComment={true}\n              isReply={true}\n              comment={comment}\n              onPresentCommentRepliesModal={(comment) => setSelectedComment(comment)}\n              onPresentCommentActionsPopover={(e, comment) => {\n                e.persist()\n                setShowPopover({event: e, comment})\n              }}\n              onLikeComment={likeComment}\n              onDisLikeComment={dislikeComment}\n            />\n          ))}\n        </IonCol>\n      </IonRow>\n      <IonInfiniteScroll\n        threshold=\"100px\"\n        disabled={noMore}\n        onIonInfinite={(e: any) => {\n          setPage((p) => p + 1)\n          setEvent(e)\n        }}\n      >\n        <IonInfiniteScrollContent>\n          <div style={{textAlign: 'center'}}>\n            <IonSpinner name=\"crescent\" />\n          </div>\n        </IonInfiniteScrollContent>\n      </IonInfiniteScroll>\n      <IonModal\n        mode=\"ios\"\n        isOpen={!!commentToEdit}\n        cssClass=\"comment-replies-modal\"\n        onWillDismiss={() => setCommentToEdit(undefined)}\n      >\n        {commentToEdit && (\n          <EditComment\n            profile={profile}\n            platform={platform}\n            comment={commentToEdit}\n            onDismiss={() => {\n              setCommentToEdit(undefined)\n              reload()\n            }}\n          />\n        )}\n      </IonModal>\n      <IonModal\n        mode=\"ios\"\n        isOpen={!!selectedComment}\n        cssClass=\"comment-replies-modal\"\n        onWillDismiss={() => setSelectedComment(undefined)}\n      >\n        {selectedComment && (\n          <CommentReply\n            lessonId={lessonId}\n            subLessonId={subLessonId}\n            profile={profile}\n            platform={platform}\n            comment={selectedComment}\n            onDismiss={() => {\n              setSelectedComment(undefined)\n              reload()\n            }}\n          />\n        )}\n      </IonModal>\n      <IonPopover\n        isOpen={!!showPopover}\n        event={showPopover?.event}\n        mode=\"md\"\n        onDidDismiss={() => setShowPopover(null)}\n      >\n        <IonList lines=\"none\">\n          <IonItem\n            onClick={() => {\n              setShowPopover(null)\n              setCommentToEdit(showPopover?.comment)\n            }}\n          >\n            <IonLabel>Edit</IonLabel>\n          </IonItem>\n          <IonItem\n            onClick={() => {\n              setShowPopover(null)\n              setCommentToDelete(showPopover?.comment)\n            }}\n          >\n            <IonLabel>Delete</IonLabel>\n          </IonItem>\n        </IonList>\n      </IonPopover>\n      <IonAlert\n        isOpen={!!commentToDelete}\n        onDidDismiss={() => setCommentToDelete(null)}\n        header={'Delete comment'}\n        message={'Delete your comment permanently?'}\n        buttons={[\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            cssClass: 'secondary',\n            handler: (blah) => {},\n          },\n          {\n            text: 'Delete',\n            handler: async () => {\n              if (commentToDelete) {\n                await postDelete({commentId: commentToDelete?._id})\n                reload()\n              }\n              ///comments/delete/, {commentId}\n              // this.deleteComment(this.commentObj.comment._id)\n            },\n          },\n        ]}\n      />\n    </div>\n  )\n}\n\nfunction AddComment({\n  onSubmit,\n  profile,\n  comment,\n  onCommentChange,\n  platform,\n  placeholder = 'Add a comment',\n}) {\n  const [cnt, setCnt] = React.useState(0)\n  // React.useEffect(() => {\n  //   console.log({comment})\n  //   if (!comment || comment === '') {\n  //     setCnt((c) => c + 1)\n  //   }\n  // }, [comment, setCnt])\n  // function saveCommentsBySubLessonId() {\n\n  // }\n  function showKeyBoard() {\n    if (platform.is('capacitor')) {\n      Keyboard.show()\n    }\n  }\n  return (\n    <IonRow className=\"add-comment ion-align-items-center ion-justify-content-center\">\n      <IonCol size=\"12\" className=\"ion-align-self-center\">\n        <form\n          onSubmit={(e) => {\n            e.preventDefault()\n            onSubmit()\n          }}\n        >\n          <IonItem lines=\"none\" mode=\"ios\" className=\" ion-no-padding\">\n            <IonAvatar slot=\"start\">\n              <img src={profile?.profilePic || '/assets/images/defaultProfile.svg'} />\n            </IonAvatar>\n            <IonInput\n              key={cnt}\n              type=\"text\"\n              placeholder={placeholder}\n              id=\"comment\"\n              name=\"comment\"\n              autofocus\n              value={comment || ''}\n              onIonChange={onCommentChange}\n              onIonFocus={showKeyBoard}\n              // onSubmit={onSubmit}\n              //  [(ngModel)]=\"comment\"\n              //   [autofocus]=\"autofocus\"\n              //   (ionFocus)=\"showKeyBoard()\"\n              //   #commentInput\n            ></IonInput>\n            {/* <IonButton fill=\"clear\"> */}\n            <IonIcon slot=\"end\" icon={send} onClick={onSubmit}></IonIcon>\n            {/* </IonButton> */}\n          </IonItem>\n        </form>\n      </IonCol>\n    </IonRow>\n  )\n}\n","export default \".comments-component .add-comment ion-item {\\n  border-bottom: 1px solid #d8d8d8;\\n  padding-bottom: 7px;\\n}\\n.comments-component ion-item.comment {\\n  border-bottom: 1px solid #d8d8d8;\\n  padding-bottom: 7px;\\n}\\n.comments-component .comment {\\n  border-bottom: 1px solid #d8d8d8;\\n}\\n.comments-component .comment ion-label {\\n  margin: 8px 0px 8px 0px;\\n}\\n.comments-component .comment .comment-user {\\n  font-size: 15px;\\n  color: #828080;\\n}\\n.comments-component .comment .comment-description {\\n  color: #212121;\\n  white-space: initial;\\n}\\n.comments-component .comment p {\\n  margin-top: 15px;\\n  color: #828080;\\n}\\n.comments-component .comment p ion-img {\\n  width: 18px;\\n  display: inline-block;\\n  vertical-align: middle;\\n  margin-right: 4px;\\n}\\n.comments-component .comment p ion-text {\\n  font-size: 14px;\\n  margin-right: 10px;\\n}\\n.comments-component .comment p .comment-like,\\n.comments-component .comment p .comment-disLike {\\n  margin-right: 10px;\\n}\\n.comments-component .comment p ion-icon {\\n  font-size: 24px;\\n}\\n.comments-component .comment .view-replies {\\n  margin-bottom: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL0NvbW1lbnRzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUk7RUFDRSxnQ0FBQTtFQUNBLG1CQUFBO0FBRE47QUFJRTtFQUNFLGdDQUFBO0VBQ0EsbUJBQUE7QUFGSjtBQUlFO0VBQ0UsZ0NBQUE7QUFGSjtBQUdJO0VBQ0UsdUJBQUE7QUFETjtBQUdJO0VBQ0UsZUFBQTtFQUNBLGNBQUE7QUFETjtBQUdJO0VBQ0UsY0FBQTtFQUNBLG9CQUFBO0FBRE47QUFHSTtFQUNFLGdCQUFBO0VBQ0EsY0FBQTtBQUROO0FBRU07RUFDRSxXQUFBO0VBQ0EscUJBQUE7RUFDQSxzQkFBQTtFQUNBLGlCQUFBO0FBQVI7QUFFTTtFQUNFLGVBQUE7RUFDQSxrQkFBQTtBQUFSO0FBRU07O0VBRUUsa0JBQUE7QUFBUjtBQUVNO0VBQ0UsZUFBQTtBQUFSO0FBR0k7RUFDRSxtQkFBQTtBQUROIiwiZmlsZSI6IkNvbW1lbnRzLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29tbWVudHMtY29tcG9uZW50IHtcbiAgLmFkZC1jb21tZW50IHtcbiAgICBpb24taXRlbSB7XG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Q4ZDhkODtcbiAgICAgIHBhZGRpbmctYm90dG9tOiA3cHg7XG4gICAgfVxuICB9XG4gIGlvbi1pdGVtLmNvbW1lbnQge1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZDhkOGQ4O1xuICAgIHBhZGRpbmctYm90dG9tOiA3cHg7XG4gIH1cbiAgLmNvbW1lbnQge1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZDhkOGQ4O1xuICAgIGlvbi1sYWJlbCB7XG4gICAgICBtYXJnaW46IDhweCAwcHggOHB4IDBweDtcbiAgICB9XG4gICAgLmNvbW1lbnQtdXNlciB7XG4gICAgICBmb250LXNpemU6IDE1cHg7XG4gICAgICBjb2xvcjogIzgyODA4MDtcbiAgICB9XG4gICAgLmNvbW1lbnQtZGVzY3JpcHRpb24ge1xuICAgICAgY29sb3I6ICMyMTIxMjE7XG4gICAgICB3aGl0ZS1zcGFjZTogaW5pdGlhbDtcbiAgICB9XG4gICAgcCB7XG4gICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgY29sb3I6ICM4MjgwODA7XG4gICAgICBpb24taW1nIHtcbiAgICAgICAgd2lkdGg6IDE4cHg7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7XG4gICAgICB9XG4gICAgICBpb24tdGV4dCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgfVxuICAgICAgLmNvbW1lbnQtbGlrZSxcbiAgICAgIC5jb21tZW50LWRpc0xpa2Uge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gICAgICB9XG4gICAgICBpb24taWNvbiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgIH1cbiAgICB9XG4gICAgLnZpZXctcmVwbGllcyB7XG4gICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgIH1cbiAgfVxufVxuIl19 */\";","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n"]}